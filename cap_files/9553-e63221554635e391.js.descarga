(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9553],{51327:function(e,t,n){"use strict";n.d(t,{Z:function(){return tQ}});var r,o,a,s,i,l,c,u,p,d,f,h,m,g=n(58915),y=n(57612),b=n(67294),v=n(74806),w=n(54434),E=n(86896),S=n(56525),C=n(23311),_={tokenStatusPath:"/identity/api/v1/one-time-token/status",smsTriggerPath:"/identity/api/v1/one-time-token/sms/trigger",smsVerifyPath:"/identity/api/v1/one-time-token/sms/verify",voiceTriggerPath:"/identity/api/v1/one-time-token/voice/trigger",voiceVerifyPath:"/identity/api/v1/one-time-token/voice/verify",whatsappTriggerPath:"/identity/api/v1/one-time-token/whatsapp/trigger",whatsappVerifyPath:"/identity/api/v1/one-time-token/whatsapp/verify",passwordVerifyPath:"/identity/api/v1/one-time-token/password/verify",phoneGuessVerifyPath:"/identity/api/v1/one-time-token/phone-guess/verify",resendEmailVerification:"/identity/api/v1/one-time-token/email-verification/resend",recaptchaChallengePath:"/identity/v1/one-time-token/recaptcha/verify"},M=n(22563);n(27382);var k=function(e){var t=e.emailVerificationTitle,n=e.emailVerificationSubTitle,r=e.emailSentAgainSuccessMessage,o=void 0===r?null:r,a=e.emailSentAgainFailureMessage,s=void 0===a?null:a,i=e.onSendItAgainClicked,l=(0,E.Z)();return b.createElement("div",{className:"text-xs-center checkemail-container"},b.createElement("div",null,b.createElement(M.a,{size:M.S.SMALL,name:M.A.EMAIL,alt:""}),b.createElement("div",{className:"m-t-4"},b.createElement("h2",{className:"email-verification-title"},t),b.createElement("p",{className:"m-t-4 m-b-0 email-verification-subtitle",dangerouslySetInnerHTML:{__html:n}}))),b.createElement("div",{className:"m-t-4"},o&&b.createElement(g.Alert,{type:g.Sentiment.POSITIVE,message:o}),s&&b.createElement(g.Alert,{type:g.Sentiment.NEGATIVE,message:s}),!o&&!s&&b.createElement("p",null,b.createElement("span",{className:"no-email"},l.formatMessage({id:"security.web.components.email.verification.did.not.get.email",defaultMessage:"Didn't get an email?"})," "),b.createElement("button",{type:"button",onClick:i,className:"btn btn-link p-x-0"},l.formatMessage({id:"security.web.components.email.verification.send.it.again",defaultMessage:"Send it again"})))))},T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},P=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},A=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},N=function(e){var t=e.intent,n=e.identityServiceHost,r=e.oneTimeToken,o=e.clientId,a=e.challenge,s=e.onSuccess,i=void 0===s?function(){}:s,l=(0,b.useState)("UNTRIGGERED"),c=l[0],u=l[1],p=(0,E.Z)(),d=p.formatMessage({id:"security.web.components.email.verification.email.resend.failure",defaultMessage:"Something went wrong. we're looking into it, please try again later"}),f=p.formatMessage({id:"security.web.components.email.verification.email.resend.success",defaultMessage:"We've resent the verification email to you, please check your inbox"}),h=function(e,n){void 0===n&&(n=!1),(0,w.zE)(e,{primaryChallenge:"email_verification",error:n,intent:t})};return(0,b.useEffect)(function(){h("SCA_web_email_verification_challenge");var e=setInterval(function(){return P(void 0,void 0,void 0,function(){var t,n,o,s;return A(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,S.fO)(r)];case 1:return(null===(s=null===(o=null===(n=null==(t=l.sent())?void 0:t.challenges)||void 0===n?void 0:n[0])||void 0===o?void 0:o.primaryChallenge)||void 0===s?void 0:s.type)!==a.type&&(h("SCA_web_email_verification_passed_silently"),i()),[3,3];case 2:return l.sent(),clearInterval(e),[3,3];case 3:return[2]}})})},3e3);return function(){return clearInterval(e)}},[]),(0,b.useEffect)(function(){switch(c){case"SUCCESS":h("SCA_web_email_verification_resend_email_success");break;case"FAILURE":h("SCA_web_email_verification_resend_email_failure",!0)}},[c]),b.createElement(k,{emailVerificationTitle:a.viewData&&a.viewData.attributes.header,emailVerificationSubTitle:a.viewData&&a.viewData.attributes.message,onSendItAgainClicked:function(e){return P(void 0,void 0,void 0,function(){var t,a,s;return A(this,function(i){switch(i.label){case 0:e.preventDefault(),u("UNTRIGGERED"),h("SCA_web_email_verification_challenge_send_again_clicked"),t="".concat(n).concat(_.resendEmailVerification),a=(0,C.Z)({language:p.locale,oneTimeToken:r,clientId:o}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(t,T({method:"POST"},a))];case 2:return(s=i.sent())&&s.status>=200&&s.status<300?u("SUCCESS"):u("FAILURE"),[3,4];case 3:return i.sent(),u("FAILURE"),[3,4];case 4:return[2]}})})},emailSentAgainFailureMessage:"FAILURE"===c?d:"",emailSentAgainSuccessMessage:"SUCCESS"===c?f:""})},x=function(e){var t=e.title,n=e.subtitle;return(0,b.useEffect)(function(){(0,w.zE)("SCA_web_mandatory_reset_password")},[]),b.createElement("div",{className:"text-xs-center mandatory-reset-password-container"},b.createElement("div",null,b.createElement("div",{className:"mandatory-reset-password-image-container"},b.createElement(M.a,{size:M.S.SMALL,name:M.A.EMAIL,alt:""})),b.createElement("div",{className:"m-y-4"},b.createElement("h2",null,t),b.createElement("p",{className:"m-t-4",dangerouslySetInnerHTML:{__html:n}}))))},I=n(51451);n(86297);var O=function(e){var t=e.onRetry,n=e.canRetry,r=e.onClose,o=e.hideClose,a=e.errorMessage,s=e.showApproveAnotherWay,i=e.onApproveAnotherWayClicked,l=(0,E.Z)(),c=a||l.formatMessage({id:"security.web.components.error.message",defaultMessage:"Something went wrong, please try again."});return b.createElement("div",{className:"text-xs-center"},!o&&b.createElement("div",{className:"row"},b.createElement("div",{className:"col-xs-6 hidden-lg hidden-xl"}),b.createElement("div",{className:"col-xs-6 col-lg-12"},b.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:r},b.createElement(I.X1q,{size:24})))),b.createElement("div",{className:"col-md-12 text-xs-center"},b.createElement(M.a,{size:M.S.SMALL,name:M.A.EXCLAMATION_MARK,alt:""})),b.createElement("div",{className:"row"},b.createElement("div",{className:"col-md-12 m-t-4"},b.createElement("h2",{className:"text-xs-center"},l.formatMessage({id:"security.web.components.error",defaultMessage:"Error"})),b.createElement("p",{className:"text-xs-center m-b-0 m-t-2"},c))),b.createElement("div",{className:"row m-t-3"},b.createElement("div",{className:"col-sm-12"},b.createElement("div",{className:"text-xs-center m-b-2"},b.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:n?t:r},n?l.formatMessage({id:"security.web.components.retry",defaultMessage:"Retry"}):l.formatMessage({id:"security.web.components.close",defaultMessage:"Close"})))),b.createElement("div",{className:"m-b-2"},s&&b.createElement(g.Button,{type:"accent",priority:"tertiary",onClick:i},l.formatMessage({id:"security.web.components.not.received.anything",defaultMessage:"Not received anything?"})),b.createElement(g.Link,{href:"/help/24/technical-issues/2960087/what-if-i-lose-my-phone-or-cant-receive-a-text",target:"_blank",rel:"noopener noreferrer",type:"link-large"},l.formatMessage({id:"security.web.components.need.some.help",defaultMessage:"Need some help?"})))))};O.defaultProps={errorMessage:null,canRetry:!0,onRetry:null,onClose:null,hideClose:!1,showApproveAnotherWay:!1,onApproveAnotherWayClicked:function(){}};var R={PUSH:"PUSH",PASSWORD:"PASSWORD",MANDATORY_RESET_PASSWORD:"MANDATORY_RESET_PASSWORD",EMAIL_VERIFICATION:"EMAIL_VERIFICATION",SMS:"SMS",WHATSAPP:"WHATSAPP",VOICE:"VOICE",PHONE_GUESS:"PHONE_GUESS",SELFIE_WITH_ID:"SELFIE_WITH_ID",RECAPTCHA:"RECAPTCHA",TOTP:"TOTP",PROFILER:"PROFILER",EMAIL_CHECKPOINT:"EMAIL_CHECKPOINT"},z=n(25679),D=n(64012),W=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.componentDidCatch=function(e,t){var n,r=this.props.onFailure;null===(n=null==window?void 0:window.Rollbar)||void 0===n||n.error("Uncaught error",F(F({},e),t)),r()},t.prototype.render=function(){var e=this.props.children;return b.createElement(b.Fragment,null,e)},t}(b.Component),V=function(){return b.createElement(b.Fragment,null,b.createElement("div",{className:"d-flex justify-content-center"},b.createElement(g.Loader,null)))},Z=b.memo(function(e){var t=e.onReset;return(0,b.useEffect)(function(){setTimeout(function(){return t()},500)},[]),b.createElement(V,null)}),j=n(44012),B=n(47954),G=n(65281);n(66268);var H=new Set(["SMS","VOICE","WHATSAPP"]),U=function(e){return e.filter(function(e){var t=e.type;return H.has(t)})},q=function(e){return e.availablePhoneNumbers.some(function(e){return e.type===B.o4})},Y=function(e){var t=e.find(function(e){var t,n=e.viewData;return null===(t=null==n?void 0:n.attributes)||void 0===t?void 0:t.maskedPhoneNumber});return t?t.viewData.attributes.maskedPhoneNumber:void 0};n(65545);var K=function(e){var t=e.goBack,n=(0,E.Z)();return b.createElement(g.Button,{className:"back-button",size:g.Size.MEDIUM,type:g.ControlType.ACCENT,priority:g.Priority.TERTIARY,onClick:t},b.createElement(I.XdH,{size:16,className:"back-button__icon p-r-1"}),n.formatMessage({id:"security.web.components.lost.access.number.go.back",defaultMessage:"Go back"}))},J=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Q=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},$=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ee=function(e){function t(t){var n=e.call(this,t)||this;return n.onLostAccessClicked=n.onLostAccessClicked.bind(n),n.isValidRecoveryPhoneNumberChallenge=n.isValidRecoveryPhoneNumberChallenge.bind(n),n.state={hasError:!1},n}return J(t,e),t.prototype.componentDidMount=function(){(0,w.zE)("SCA_Web - Page View - Lost Access To Number")},t.prototype.onLostAccessClicked=function(e){var t,n,r,o;return t=this,n=void 0,r=void 0,o=function(){var t,n,r,o,a,s,i,l,c;return Q(this,function(u){switch(u.label){case 0:return e.preventDefault(),n=(t=this.props).clientId,r=t.oneTimeToken,o=t.type,a=t.intl,(0,w.zE)("SCA_Web - Lost Access To Number - Phone Change Clicked",{type:o}),s=(0,C.Z)({language:a.locale,oneTimeToken:r,clientId:n}),[4,fetch("/gateway/identity/api/v1/phone-change/ott",X({method:"POST"},s))];case 1:if(!((i=u.sent())&&i.status>=200&&i.status<300))return[3,3];return[4,i.json()];case 2:return(l=u.sent())&&l.oneTimeTokenProperties&&l.oneTimeTokenProperties.oneTimeToken&&((0,w.zE)("SCA_Web - Lost Access To Number - Phone Change - success",{type:o}),window.location.href="/login/change-phone-number#/?code=".concat(l.oneTimeTokenProperties.oneTimeToken)),[3,4];case 3:c=i.status||418,this.setState({hasError:!0}),(0,w.zE)("SCA_Web - Lost Access To Number - Phone Change - fail",{type:o,error:!0,errorCode:c}),u.label=4;case 4:return[2]}})},new(r||(r=Promise))(function(e,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,i)}l((o=o.apply(t,n||[])).next())})},t.prototype.isValidRecoveryPhoneNumberChallenge=function(e){return H.has(e.type)&&q(e)},t.prototype.getRecoveryPhoneNumberChallengeOptions=function(e){var t=this.props,n=t.onSendViaSMS,r=t.onSendViaVoiceCall,o=t.onSendViaWhatsapp,a=t.intl;switch(e.type){case"SMS":return b.createElement(g.NavigationOption,{key:"recovery-sms-option",title:a.formatMessage({id:"security.web.components.send.code.via.sms",defaultMessage:"Send code by SMS"}),onClick:n,media:b.createElement(I.x2q,{size:24})});case"VOICE":return b.createElement(g.NavigationOption,{key:"recovery-voice-option",title:a.formatMessage({id:"security.web.components.send.code.via.voice.call",defaultMessage:"Send code by voice call"}),onClick:r,media:b.createElement(I.Cs,{size:24})});case"WHATSAPP":return b.createElement(g.NavigationOption,{key:"recovery-whatsapp-option",title:a.formatMessage({id:"security.web.components.send.code.via.whatsapp",defaultMessage:"Send code by WhatsApp"}),onClick:o,media:b.createElement(I.CDv,{size:24})});default:return null}},t.prototype.isRecoveryPhoneNumber=function(e){return q(e)},t.prototype.render=function(){var e=this,t=this.props,n=t.onGoBack,r=t.alternateChallenges,o=t.currentChallenge,a=t.intl,s=this.state.hasError,i=this.isRecoveryPhoneNumber(o),l=(0,D.U)(o,i),c=o.viewData[l].maskedPhoneNumber;return b.createElement("div",{className:"text-xs-center lost-access-to-number-container"},b.createElement("h2",{className:"m-b-1"},a.formatMessage({id:"security.web.components.lost.access.number.title",defaultMessage:"Lost access to this number"})),c&&b.createElement(b.Fragment,null,i?b.createElement(j.Z,{id:"security.web.components.recovery.phone.number.lost.access.to.primary.number.subtitle",defaultMessage:"Your backup phone number is <strong>{phoneNumber}</strong>",values:{phoneNumber:c,strong:function(e){return b.createElement("strong",null,e)}}}):b.createElement(j.Z,{id:"security.web.components.lost.access.number.registered.number.text",defaultMessage:"Your registered phone number is <strong>{phoneNumber}</strong>",values:{phoneNumber:c,strong:function(e){return b.createElement("strong",null,e)}}})),!i&&b.createElement("p",{className:"m-t-3"},a.formatMessage({id:"security.web.components.lost.access.number.subtitle",defaultMessage:"To change your phone number we will ask you to verify your identity by uploading a selfie of yourself holding your ID."})),s?b.createElement("div",{className:"m-t-4"},b.createElement(g.Alert,{type:g.Sentiment.NEGATIVE,message:a.formatMessage({id:"security.web.components.lost.access.number.error-message",defaultMessage:"You'll need to contact us to get help changing your phone number"}),action:{text:a.formatMessage({id:"security.web.components.lost.access.number.error-message.action-label",defaultMessage:"Get help"}),href:"/help/contact"}})):b.createElement("ul",{className:"m-t-3 approve-list list-group panel-list-group list-group-inactive"},i&&$([o],r,!0).filter(this.isValidRecoveryPhoneNumberChallenge).map(function(t){return e.getRecoveryPhoneNumberChallengeOptions(t)}),b.createElement(g.NavigationOption,{title:i?a.formatMessage({id:"security.web.components.recovery.phone.number.change.primary.number.option.title",defaultMessage:"Change primary phone number"}):a.formatMessage({id:"security.web.components.change.phone.option.title",defaultMessage:"Change your phone number"}),content:i?a.formatMessage({id:"security.web.components.recovery.phone.number.change.primary.number.option.subtitle",defaultMessage:"We’ll ask to verify your identity. This usually takes 10 minutes but can take up to 1 day to complete"}):a.formatMessage({id:"security.web.components.change.phone.option.subtitle",defaultMessage:"This usually takes 10 minutes but can take up to 1 day"}),onClick:this.onLostAccessClicked,media:b.createElement(I.ij_,{size:24}),"data-testid":"change-phone-number-button"})),b.createElement("div",{className:"m-t-4 text-xs-center"},b.createElement(K,{goBack:n})))},t}(b.PureComponent),et=(0,v.ZP)(ee),en=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},er=function(e){var t,n=e.token,r=e.clientId,o=e.onShowChallenge,a=e.currentChallenge,s=e.alternateChallenges,i=(0,E.Z)(),l=(0,b.useState)(!1),c=l[0],u=l[1],p=en(en([],s.map(function(e){return e.type}),!0),[a.type],!1),d=U(s).length>0,f=Y(en([a],s,!0));if(c){var h=null===(t=U(en([a],s,!0)))||void 0===t?void 0:t[0],m=s.filter(function(e){return e.type!==h.type});return b.createElement(et,{type:"fa_sms",onGoBack:function(){return u(!1)},oneTimeToken:n,clientId:r,onSendViaVoiceCall:function(){return o(B.H4,!0)},onSendViaSMS:function(){return o(B.yW,!0)},onSendViaWhatsapp:function(){return o(B.Q2,!0)},currentChallenge:h,alternateChallenges:m})}return b.createElement("div",null,b.createElement("h2",null,i.formatMessage({defaultMessage:"Approve another way",id:"security.web.components.approve.another.way"})),f&&b.createElement("p",null,b.createElement(j.Z,{id:"security.web.components.recovery.phone.number.approve.another.phone.number.subtitle",defaultMessage:"Your registered phone number is <strong>{phoneNumber}</strong>",values:{phoneNumber:f,strong:function(e){return b.createElement("strong",null,e)}}})),b.createElement(G.Z,{currentMethod:a.type,methods:p,onChooseMethod:o}),d&&b.createElement(g.Button,{type:g.ControlType.ACCENT,priority:g.Priority.TERTIARY,onClick:function(){(0,w.zE)("Factored Auth - Change Phone Number",{context:a.type}),u(!0)}},i.formatMessage({id:"security.web.components.change.this.number",defaultMessage:"I lost access to this phone number"})))},eo=n(85901),ea=n(50554),es=n(92272),ei=function(){var e=(0,b.useContext)(g.SnackbarContext);return(null==e?void 0:e.createSnackbar)==null&&(0,es.Z)("Security web components should be wrapped in a SnackbarProvider","warning"),null==e?void 0:e.createSnackbar},el=n(36617),ec=(0,n(26432).ManagedAuthenticationEmailCheckpointTracking)(w.zE,{withPrefix:"flowstep"}),eu=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ep=function(e){var t=e.challenge,n=e.onComplete,r=e.onResendEmail,o=e.token,a=e.clientId,s=e.retryEnabled,i=(0,b.useState)(),l=i[0],c=i[1],u=(0,E.Z)(),p=(0,el.Z)({request:(0,b.useCallback)(function(){var e,t,n,r;return e=void 0,t=void 0,n=void 0,r=function(){return eu(this,function(e){switch(e.label){case 0:return[4,(0,S.vh)(u.locale,o,a).then(function(e){var t;return ec.checkedStatus({outcome:"success",responseStatus:null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.toString(),failureReason:void 0}),e}).catch(function(e){var t,n,r,o;if((null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status)===400||(null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.status)===401||(null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.status)===404)throw ec.checkedStatus({outcome:"failure",failureReason:(null==e?void 0:e.message)||e.code,responseStatus:null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.status}),e;return ec.checkedStatus({outcome:"failure-ignored",failureReason:(null==e?void 0:e.message)||e.code,responseStatus:void 0}),Promise.resolve({status:202})})];case 1:return[2,e.sent()]}})},new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},[]),onSuccess:function(){ec.finished({outcome:"success",failureReason:void 0}),n()},onError:function(e){var t,n,r;if(ec.finished({outcome:"failure",failureReason:e.message||e.code}),(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.status)===400||(null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.status)===401||(null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.status)===404){c({message:u.formatMessage({id:"security.web.components.email.checkpoint.verify.generic.error.header",defaultMessage:"Something went wrong"})});return}c((0,z.Z)(e))},maxRequests:600,delay:2e3}),d=p.requestCount,f=p.retry;return((0,b.useLayoutEffect)(function(){var e=function(){"visible"===document.visibilityState?(ec.enteredForeground(),f()):ec.enteredBackground()};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}},[]),l)?b.createElement(ea.Z,{errorMessage:l.message||l.code,description:u.formatMessage({id:"security.web.components.email.checkpoint.verify.generic.error.description",defaultMessage:"Please try logging in again."}),showGetHelp:!1},b.createElement(g.Button,{block:!0,priority:g.Priority.PRIMARY,onClick:function(){return window.location.assign("/login")}},u.formatMessage({id:"security.web.components.email.checkpoint.verify.generic.error.done",defaultMessage:"Done"}))):b.createElement("div",{className:"text-xs-center"},b.createElement("div",{className:"text-xs-center"},b.createElement(M.a,{size:M.S.SMALL,name:M.A.KEY,alt:""}),b.createElement("div",{className:"m-t-4"},b.createElement(g.Display,{as:"h2",type:"display-small"},t.viewData.attributes.header),b.createElement("p",{className:"m-t-4 m-b-0",dangerouslySetInnerHTML:{__html:t.viewData.attributes.message}}))),b.createElement("div",{className:"m-t-5 m-b-5"},b.createElement(g.ProcessIndicator,{size:g.Size.SMALL})),b.createElement(g.Button,{disabled:!(d>=5&&(void 0===s||s)),type:g.ControlType.ACCENT,priority:g.Priority.SECONDARY,onClick:function(){r()}},u.formatMessage({id:"security.web.components.email.checkpoint.resend.email",defaultMessage:"Resend email"})))},ed=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function ef(e,t,n){var r=void 0===n?"success":"failure";if(0===e){t.challengeTriggered({outcome:r,failureReason:(null==n?void 0:n.message)||(null==n?void 0:n.code)});return}t.resendEmailSubmitted({outcome:r,failureReason:(null==n?void 0:n.message)||(null==n?void 0:n.code)})}var eh=function(e){var t,n=e.token,r=e.challenge,o=e.onComplete,a=e.clientId,s=(0,b.useState)(0),i=s[0],l=s[1],c=(0,b.useState)(!1),u=c[0],p=c[1],d=ei(),f=(0,E.Z)();(0,b.useEffect)(function(){ec.pageView()},[ec]);var h=(0,eo.Z)(function(){var e,t,r,a;return e=void 0,t=void 0,r=void 0,a=function(){var e;return ed(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,S.QI)(n,f.locale,f.timeZone)];case 1:if(205===t.sent().status)return o(),[2];return ef(i,ec),p(!0),null==d||d({text:f.formatMessage({id:"security.web.components.email.checkpoint.email.resent",defaultMessage:"Email sent"})}),l(i+1),[3,3];case 2:throw e=t.sent(),ef(i,ec,(0,z.Z)(e)),e;case 3:return[2]}})},new(r||(r=Promise))(function(n,o){function s(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})}),m=h.error,y=h.retry,v=h.loading;return m?b.createElement(ea.Z,{retry:function(){return y()},errorMessage:f.formatMessage({id:"security.web.components.email.checkpoint.trigger.error.message.header",defaultMessage:"There was a problem on our end"}),description:null===(t=(0,z.Z)(m))||void 0===t?void 0:t.message}):u?b.createElement(ep,{clientId:a,challenge:r,onComplete:o,token:n,onResendEmail:y,retryEnabled:i<2}):v?b.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},b.createElement(g.Loader,null)):null},em=function(e){var t=e.message,n=(0,E.Z)();return b.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},b.createElement(g.Loader,null),b.createElement("h4",{className:"m-t-2 m-b-0"},t||n.formatMessage({id:"security.web.components.verifying.identity",defaultMessage:"Verifying your identity"})))},eg=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ey=function(e){var t,n,r=e.token,o=e.challenge,a=e.onComplete,s=e.clientId,i=(0,E.Z)();return(0,el.Z)({request:(0,b.useCallback)(function(){var e,t,n,o;return e=void 0,t=void 0,n=void 0,o=function(){var e,t,n,o;return eg(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,S.wG)(i.locale,r,s)];case 1:return e=a.sent(),(0,w.zE)("SCA_Web - Profiler - checking status"),[2,e];case 2:return 400<=(n=(t=a.sent()).response.status)&&n<500&&(o=(0,z.Z)(t),(0,w.zE)("SCA_Web - Profiler - verify Fail",{error:!0,errorCode:o.code,statusCode:n})),[2,Promise.resolve({status:202})];case 3:return[2]}})},new(n||(n=Promise))(function(r,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((o=o.apply(e,t||[])).next())})},[]),onSuccess:function(){(0,w.zE)("SCA_Web - Profiler - verify success"),a()},maxRequests:30,delay:200}),b.createElement(em,{message:null===(n=null===(t=o.viewData)||void 0===t?void 0:t.attributes)||void 0===n?void 0:n.message})},eb=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ev=function(e){var t=e.token,n=e.challenge,r=e.onComplete,o=e.clientId,a=(0,E.Z)(),s=(0,b.useState)(!1),i=s[0],l=s[1],c=(0,eo.Z)(function(){var e,n,r,o;return e=void 0,n=void 0,r=void 0,o=function(){var e,n;return eb(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,S.um)(t,a.locale)];case 1:return r.sent(),l(!0),(0,w.zE)("SCA_Web - Profiler - trigger success"),[3,3];case 2:throw e=r.sent(),n=(0,z.Z)(e),(0,w.zE)("SCA_Web - Profiler - trigger Fail",{error:!0,errorCode:n.code}),e;case 3:return[2]}})},new(r||(r=Promise))(function(t,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?t(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(s,i)}l((o=o.apply(e,n||[])).next())})}),u=c.error,p=c.retry;return u?b.createElement("div",{className:"text-xs-center"},b.createElement("h1",{className:"h2 m-b-2"},a.formatMessage({id:"security.web.components.profiler.generic.error.message",defaultMessage:"Something went wrong, please try again."})),b.createElement(g.Button,{onClick:p},a.formatMessage({id:"security.web.components.profiler.retry",defaultMessage:"Retry"})),b.createElement(g.Link,{className:"d-block m-t-1",href:"/help/contact/flows/logged-out/trouble-logging-in"},a.formatMessage({id:"security.web.components.get-help",defaultMessage:"Get help"}))):i?b.createElement(ey,{token:t,challenge:n,onComplete:r,clientId:o}):b.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},b.createElement(g.Loader,null))},ew=n(59214);n(80908);var eE=function(e){var t=e.oneTouchTitle,n=e.oneTouchSubtitle,r=e.hideLearnMoreLink,o=(0,E.Z)();return b.createElement("div",{className:"text-xs-center push-container"},b.createElement(M.a,{size:M.S.SMALL,name:M.A.BELL,alt:""}),b.createElement("div",{className:"m-t-4"},b.createElement("h2",null,t),b.createElement("p",{className:"m-t-2 m-b-0"},n),!r&&b.createElement("div",{className:"m-b-4"},b.createElement(g.Link,{href:"/help/24/technical-issues/2960083/what-is-2-step-login",target:"_blank",rel:"noopener noreferrer"},o.formatMessage({id:"security.web.components.learn.more",defaultMessage:"Learn more"})))))};eE.defaultProps={hideLearnMoreLink:!1};var eS=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},eC=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},e_=function(e){var t,n,r=e.challenge,o=e.onComplete,a=e.onShowOtherMethods,s=e.token,i=e.clientId,l=(0,E.Z)(),c=(0,b.useCallback)(function(){return eS(void 0,void 0,void 0,function(){var e,t,n;return eC(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,S.dy)(l.locale,s,i)];case 1:return e=r.sent(),(0,w.zE)("SCA_Web - OneTouch - Verify Pass"),[2,e];case 2:if(400===(t=r.sent()).response.status)throw n=(0,z.Z)(t),(0,w.zE)("SCA_Web - OneTouch - Verify Fail",{error:!0,errorCode:n.code,statusCode:400}),t;return[2,Promise.resolve({status:202})];case 3:return[2]}})})},[]),u=(0,b.useCallback)(function(){return eS(void 0,void 0,void 0,function(){return eC(this,function(e){switch(e.label){case 0:return[4,(0,S.lE)(r.context.challengeId)];case 1:return[2,e.sent()]}})})},[r]),p=(0,el.Z)({request:(null===(t=r.context)||void 0===t?void 0:t.version)===2?u:c,shouldRetry:(null===(n=r.context)||void 0===n?void 0:n.version)===2?function(e){var t=e.data;return"APPROVED"!==t.status&&"DENIED"!==t.status}:void 0,onSuccess:function(){o()},maxRequests:600,delay:1e3}).requestCount;return b.createElement("div",{className:"text-xs-center",style:{minHeight:360}},b.createElement(eE,{oneTouchTitle:r.viewData.attributes.header,oneTouchSubtitle:r.viewData.attributes.message,hideLearnMoreLink:!0}),b.createElement("div",{className:"m-t-5 m-b-3"},b.createElement(g.ProcessIndicator,{size:g.Size.SMALL})),b.createElement(g.Button,{disabled:!(p>=5),type:g.ControlType.ACCENT,priority:g.Priority.TERTIARY,onClick:function(){(0,w.zE)("SCA_Web - OneTouch - Did Not Receive Anything"),a()}},l.formatMessage({id:"security.web.components.login.havent.received.approval.request",defaultMessage:"I haven’t received an approval request"})))},eM=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ek=function(e){var t=e.token,n=e.challenge,r=e.clientId,o=e.onComplete,a=e.onShowOtherMethods,s=e.onShowChallenge,i=(0,E.Z)(),l=(0,ew.Ux)().guestId,c=(0,b.useState)(!1),u=c[0],p=c[1];(0,b.useEffect)(function(){(0,w.zE)("SCA_Web - Page View - OneTouch Login")},[]);var d=(0,eo.Z)(function(){var e,r,o,a;return e=void 0,r=void 0,o=void 0,a=function(){var e,r,o,a;return eM(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,S.hC)(t,i.locale,null===(o=n.context)||void 0===o?void 0:o.version)];case 1:return l.sent(),(0,w.zE)("SCA_Web - OneTouch - Trigger Pass"),p(!0),[3,3];case 2:if(e=l.sent(),r=(0,z.Z)(e),(0,w.zE)("SCA_Web - OneTouch - Trigger Fail",{error:!0,errorCode:r.code}),"authy_account_deleted"===r.code)return s("SMS"),[2];throw null===(a=null==window?void 0:window.Rollbar)||void 0===a||a.error(e),e;case 3:return[2]}})},new(o||(o=Promise))(function(t,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function i(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var n;e.done?t(e.value):((n=e.value)instanceof o?n:new o(function(e){e(n)})).then(s,i)}l((a=a.apply(e,r||[])).next())})}),f=d.error,h=d.retry;return u?b.createElement(e_,{challenge:n,onComplete:o,onShowOtherMethods:a,token:t,clientId:r}):f?b.createElement("div",{className:"text-xs-center"},b.createElement("h1",{className:"h2 m-b-2"},i.formatMessage({id:"security.web.components.error.message",defaultMessage:"Something went wrong, please try again."})),b.createElement("p",null,i.formatMessage({id:"security.web.components.error.message.guestid",defaultMessage:"Error code: {guestId}"},{guestId:null==l?void 0:l.slice(0,8)})),b.createElement(g.Button,{onClick:h},i.formatMessage({id:"security.web.components.retry.on.phone",defaultMessage:"Resend push on phone"})),b.createElement(g.Link,{className:"d-block m-t-1",type:"link-large",href:"/help/contact/flows/logged-out/trouble-logging-in"},i.formatMessage({id:"security.web.components.get-help",defaultMessage:"Get help"}))):null},eT=n(103),eP=n(94936),eA=n(29837),eN=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ex=function(e){var t=e.token,n=e.challenge,r=e.onComplete,o=e.onShowOtherMethods,a=(0,E.Z)(),s=(0,b.useState)(""),i=s[0],l=s[1],c=(0,b.useState)(),u=c[0],p=c[1];(0,b.useEffect)(function(){(0,w.zE)("Challenge - Started",{challengeType:"TOTP"})},[]);var d=(0,eT.Z)(function(e){var n,o,s,l;return n=void 0,o=void 0,s=void 0,l=function(){var n,o;return eN(this,function(s){switch(s.label){case 0:p(void 0),e.preventDefault(),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,S.m5)(t,i,a.locale)];case 2:return s.sent(),(0,w.zE)("Challenge - Submitted",{challengeType:"TOTP",outcome:"success"}),r(),[3,4];case 3:return n=s.sent(),o=(0,z.Z)(n),(0,w.zE)("Challenge - Submitted",{challengeType:"TOTP",outcome:"failure",errorCode:o.code}),p(o.message),[3,4];case 4:return[2]}})},new(s||(s=Promise))(function(e,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function a(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):((n=t.value)instanceof s?n:new s(function(e){e(n)})).then(r,a)}i((l=l.apply(n,o||[])).next())})},[i]),f=d[0].loading,h=d[1];return b.createElement("div",null,b.createElement("form",{noValidate:!0,method:"post",className:"text-xs-center m-b-2",onSubmit:h},b.createElement(M.a,{className:"m-y-2 m-x-4",size:M.S.SMALL,name:M.A.KEY,alt:""}),b.createElement("h1",null,n.viewData.attributes.header),b.createElement("p",null,n.viewData.attributes.message),b.createElement(eP.Z,{errorMessage:u,onCodeInputChange:function(e){p(void 0),l(e)}}),b.createElement("div",{className:"m-t-3"},b.createElement(g.Button,{htmlType:"submit",block:!0,disabled:f,loading:f},a.formatMessage({id:"security-web-components.challenge.totp.confirm.button",defaultMessage:"Confirm code"})))),b.createElement("p",{className:"m-t-4 m-b-0"},a.formatMessage({id:"security-web-components.challenge.totp.choose-alternative-method.question",defaultMessage:"Can’t use your authenticator app?"})),b.createElement(eA.Z,{onClick:function(){o()},delay:1e4},a.formatMessage({id:"security-web-components.challenge.totp.choose-alternative-method.label",defaultMessage:"Try another way"})))},eI=function(e){var t=e.clientId,n=e.currentChallenge,r=e.alternateChallenges,o=e.oneTimeToken,a=e.onComplete,s=e.onShowChallenge,i=(0,b.useState)(!1),l=i[0],c=i[1];return l?b.createElement(er,{token:o,clientId:t,currentChallenge:n,alternateChallenges:r,onShowChallenge:function(e,t){c(!1),s(e,t)}}):b.createElement("div",null,"PUSH"===n.type&&b.createElement(ek,{clientId:t,token:o,challenge:n,onComplete:a,onShowChallenge:s,onShowOtherMethods:function(){return c(!0)}}),"TOTP"===n.type&&b.createElement(ex,{token:o,challenge:n,onComplete:a,onShowOtherMethods:function(){return c(!0)}}),n.type===R.PROFILER&&b.createElement(ev,{token:o,challenge:n,onComplete:a,clientId:t}),n.type===R.EMAIL_CHECKPOINT&&b.createElement(eh,{token:o,challenge:n,onComplete:a,clientId:t}))},eO=n(40129),eR=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ez=function(){return(ez=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},eD=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},eW=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loading:!0},n.props=t,n.recaptchaRef=b.createRef(),n.verifyRecaptcha=n.verifyRecaptcha.bind(n),n}return eR(t,e),t.prototype.componentDidMount=function(){(0,w.zE)("SCA_Web - Page View - Recaptcha V2 challenge"),this.postTrigger()},t.prototype.postTrigger=function(){try{this.recaptchaRef.current.execute()}catch(e){(0,w.zE)("SCA_Web - Recaptcha V2 - Trigger Fail",{error:!0,errorMessage:JSON.stringify(e),statusCode:418}),this.props.onFailure(e)}},t.prototype.verifyRecaptcha=function(e){var t,n,r,o;return void 0===e&&(e=null),t=this,n=void 0,r=void 0,o=function(){var t,n,r,o,a,s,i,l,c,u,p,d,f;return eD(this,function(h){switch(h.label){case 0:if(n=(t=this.props).clientId,r=t.identityServiceHost,o=t.oneTimeToken,a=t.onFailure,s=t.getChallenges,i=t.siteKey,l=t.intl,!e)return[3,3];return(0,w.zE)("SCA_Web - Recaptcha V2 - Trigger Pass"),c="".concat(r).concat(_.recaptchaChallengePath),u=(0,C.Z)({language:l.locale,oneTimeToken:o,clientId:n}),p=JSON.stringify({challenge:e,siteKey:i}),[4,fetch(c,ez(ez({method:"POST"},u),{credentials:"include",body:p}))];case 1:if((d=h.sent())&&d.status>=200&&d.status<300)return(0,w.zE)("SCA_Web - Recaptcha V2 - Verify Pass"),this.setState({loading:!1}),[2,s()];if(!(d&&d.status>=400))return[3,3];return[4,d.json()];case 2:if((f=h.sent())&&f.message)return(0,w.zE)("SCA_Web - Recaptcha V2 - Verify Fail",{error:!0,errorMessage:f&&f.message,statusCode:d.status}),[2,a(f.message)];h.label=3;case 3:return[2,a(l.formatMessage({id:"security.web.components.could.not.resolve.recaptcha.message",defaultMessage:"Could not resolve recaptcha"}))]}})},new(r||(r=Promise))(function(e,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,i)}l((o=o.apply(t,n||[])).next())})},t.prototype.render=function(){return b.createElement("div",null,this.state.loading&&b.createElement(V,null),b.createElement(eO.Z,{siteKey:this.props.siteKey,ref:this.recaptchaRef,onSuccess:this.verifyRecaptcha}))},t}(b.Component),eF=(0,v.ZP)(eW),eL=n(71750);n(66527);var eV=new Set(["change-phone-number","HAT","settings-2fa-setup"]),eZ=function(e){var t=e.intent,n=e.onChangePhone,r=e.onSubmitCode,o=e.smsTitle,a=e.smsVerifySubtitle,s=e.smsSubtitle,i=e.smsErrorMessage,l=e.codeInputChange,c=e.loading,u=e.onResendSms,p=e.onVerifyAnotherWay,d=(0,E.Z)(),f=!eV.has(t),h=null!==n;return b.createElement("div",{className:"text-xs-center sms-container"},b.createElement("form",{noValidate:!0,method:"post",className:"text-xs-center",onSubmit:r},b.createElement("div",null,b.createElement(M.a,{name:M.A.PLANE,size:M.S.SMALL,alt:""}),b.createElement("div",{className:"m-t-4"},o&&b.createElement("h2",null,o),a?b.createElement("p",{className:"m-t-2 m-b-0"},a):b.createElement("p",{className:"m-t-2 m-b-0",dangerouslySetInnerHTML:{__html:s}}),f&&!h&&b.createElement("div",{className:"m-b-4"},b.createElement(g.Link,{href:"/help/24/technical-issues/2960083/what-is-2-step-login",target:"_blank",rel:"noopener noreferrer"},d.formatMessage({id:"security.web.components.learn.more",defaultMessage:"Learn more"}))),h&&b.createElement("div",{className:"m-b-4"},b.createElement(g.Button,{type:"accent",priority:"tertiary",onClick:n},d.formatMessage({id:"security.web.components.change.this.number",defaultMessage:"I lost access to this phone number"}))),b.createElement(eP.Z,{errorMessage:i,onCodeInputChange:l}))),b.createElement("div",{className:"m-t-3"},b.createElement(g.Button,{htmlType:"submit",block:!0,disabled:c,loading:c},d.formatMessage({id:"security.web.components.done",defaultMessage:"Done"})),u&&b.createElement("div",{className:"m-t-2"},b.createElement(g.Button,{type:"accent",priority:"tertiary",onClick:function(){return u()}},d.formatMessage({id:"security.web.components.sms.resend",defaultMessage:"Didn’t get a code? Send again"}))),p&&b.createElement("div",{className:"m-t-2"},b.createElement(g.Button,{type:"accent",priority:"tertiary",onClick:function(){return p()}},d.formatMessage({id:"security.web.components.didnt.receive.a.code",defaultMessage:"I didn’t receive a code"}))))))};eZ.defaultProps={smsVerifySubtitle:null,smsErrorMessage:null,smsTitle:null,loading:!1,onResendSms:null,onChangePhone:null,onVerifyAnotherWay:null};var ej=n(16361),eB=function(){return(eB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},eG=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},eH=function(e){var t=e.alternateChallenges,n=e.currentChallenge,r=e.oneTimeToken,o=e.clientId,a=e.identityServiceHost,s=e.intent,i=e.onShowChallenge,l=e.onSuccess,c=e.onFailure,u=e.phoneNumberId,p=e.getChallenges,d=(0,E.Z)(),f=(0,b.useState)(!0),h=f[0],m=f[1],v=(0,b.useState)(!1),S=v[0],M=v[1],k=(0,b.useState)(null),T=k[0],P=k[1],A=(0,b.useState)(!1),N=A[0],x=A[1],I=(0,b.useState)(""),O=I[0],R=I[1],z=(0,y.useProfiler)().pcx,D=n.viewData[u].header,W=n.viewData[u].message;return S?b.createElement(er,{token:r,clientId:o,currentChallenge:n,alternateChallenges:t,onShowChallenge:i}):b.createElement(b.Fragment,null,b.createElement(eZ,{onSuccess:l,onFailure:c,smsTitle:D,smsSubtitle:W,onSubmitCode:function(e){var t,n,s,i;return t=void 0,n=void 0,s=void 0,i=function(){var t,n,s,i,l,u;return eG(this,function(f){switch(f.label){case 0:if((0,w.zE)("SCA_Web - SMS - Code Submitted"),e.preventDefault(),P(null),t="SCA_Web - SMS - Verify Fail",!((n=O)&&6===n.length))return[3,6];return x(!0),s="".concat(a).concat(_.smsVerifyPath),i=(0,C.Z)({language:d.locale,oneTimeToken:r,clientId:o,ggow:null==z?void 0:z.ggow,mosc:null==z?void 0:z.mosc}),[4,fetch(s,eB(eB({method:"POST"},i),{body:JSON.stringify({otpCode:n})}))];case 1:if(!((l=f.sent())&&l.status>=200&&l.status<300))return[3,2];return(0,w.zE)("SCA_Web - SMS - Verify Pass"),p(),[3,5];case 2:if(!(l&&l.status>=400))return[3,4];return[4,l.json()];case 3:return(u=f.sent())&&("attempt_limit_reached"===u.code?((0,w.zE)(t,{error:!0,errorMessage:u&&u.code,statusCode:l.status}),window.location.href="/logout"):u.message&&((0,w.zE)(t,{error:!0,errorMessage:u&&u.message,statusCode:l.status}),x(!1),u&&P(u.message))),[3,5];case 4:(0,w.zE)(t,{error:!0,statusCode:l.status}),c(),f.label=5;case 5:return[3,7];case 6:(0,w.zE)(t,{error:!0,statusCode:418,errorMessage:"Code length less than 6 or no code"}),P(d.formatMessage({id:"security.web.components.otp.format.error",defaultMessage:"Please enter a 6 digit code."})),f.label=7;case 7:return[2]}})},new(s||(s=Promise))(function(e,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof s?n:new s(function(e){e(n)})).then(o,a)}l((i=i.apply(t,n||[])).next())})},smsErrorMessage:T,codeInputValue:O,codeInputChange:function(e){R(e)},loading:N,intent:s}),b.createElement(ej.Z,null),h&&b.createElement(eA.Z,{delay:1e4,onClick:function(){(0,w.zE)("SCA_Web - SMS - Did Not Receive Anything"),M(!0),m(!1)}},d.formatMessage({id:"security.web.components.didnt.receive.a.code",defaultMessage:"I didn’t receive a code"})),!h&&b.createElement("div",{className:"m-t-4"},b.createElement(g.Link,{href:"/help/24/technical-issues/2960087/what-if-i-lose-my-phone-or-cant-receive-a-text",target:"_blank",rel:"noopener noreferrer",type:"link-large"},d.formatMessage({id:"security.web.components.need.some.help",defaultMessage:"Need some help?"}))))},eU=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eq=function(){return(eq=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},eY=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},eK=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},eJ=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={showVerify:!1,loading:!0},n}return eU(t,e),t.prototype.componentDidMount=function(){return eY(this,void 0,void 0,function(){var e;return eK(this,function(t){switch(t.label){case 0:return e=this.props.phoneNumberId,(0,w.zE)("SCA_Web - Page View - SMS Login",{phoneNumberId:e}),[4,this.postTrigger()];case 1:return t.sent(),[2]}})})},t.prototype.postTrigger=function(){return eY(this,void 0,void 0,function(){var e,t,n,r,o,a,s,i,l,c,u,p,d,f;return eK(this,function(h){switch(h.label){case 0:t=(e=this.props).identityServiceHost,n=e.intl,r=e.oneTimeToken,o=e.clientId,a=e.onFailure,s=e.phoneNumberId,i=e.onShowChallenge,l="".concat(t).concat(_.smsTriggerPath),c=(0,C.Z)({language:n.locale,oneTimeToken:r,clientId:o}),h.label=1;case 1:return h.trys.push([1,6,,7]),[4,fetch(l,eq(eq({method:"POST"},c),{body:JSON.stringify({phoneNumberId:s})}))];case 2:if(!((u=h.sent())&&u.status>=200&&u.status<300))return[3,3];return(0,w.zE)("SCA_Web - SMS - Trigger Pass",{phoneNumberId:s}),this.setState({showVerify:!0,loading:!1}),[3,5];case 3:if(!(u&&u.status>=400))return[3,5];return[4,u.json()];case 4:if(p=h.sent(),d=(0,z.Z)(p),(0,w.zE)("SCA_Web - SMS - Trigger Fail",{error:!0,errorCode:d.code,statusCode:u.status,phoneNumberId:s}),(0,eL.i)(d))return i(B.H4),[2];d.message&&a(d.message),h.label=5;case 5:return[3,7];case 6:return f=h.sent(),(0,w.zE)("SCA_Web - SMS - Trigger Fail",{error:!0,errorMessage:JSON.stringify(f),statusCode:418,phoneNumberId:s}),a(),[3,7];case 7:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,n=e.showVerify;return t?b.createElement(V,null):n?b.createElement(eH,eq({},this.props)):null},t}(b.Component),eX=(0,v.ZP)(eJ);n(2551);var eQ=new Set(["change-phone-number","settings-2fa-setup"]),e$=function(e){var t=e.onSubmitCode,n=e.voiceTitle,r=e.voiceSubtitle,o=e.voiceErrorMessage,a=e.codeInputChange,s=e.loading,i=e.intent,l=e.onChangePhone,c=e.onVerifyAnotherWay,u=(0,E.Z)(),p=!eQ.has(i),d=null!==l;return b.createElement("div",{className:"text-xs-center voice-container"},b.createElement("form",{noValidate:!0,method:"post",className:"text-xs-center",onSubmit:t},b.createElement(M.a,{size:M.S.SMALL,name:M.A.PHONES,alt:""}),b.createElement("input",{type:"hidden",name:"containerData"}),b.createElement("div",null,b.createElement("div",{className:"m-t-4"},b.createElement("h2",null,n),b.createElement("p",{className:"m-t-2 m-b-0",dangerouslySetInnerHTML:{__html:r}}),p&&!d&&b.createElement("div",{className:"m-b-5"},b.createElement(g.Link,{href:"/help/24/technical-issues/2960083/what-is-2-step-login",target:"_blank",rel:"noopener noreferrer"},u.formatMessage({id:"security.web.components.learn.more",defaultMessage:"Learn more"}))),d&&b.createElement("div",{className:"m-b-4"},b.createElement(g.Button,{type:"accent",priority:"tertiary",onClick:l},u.formatMessage({id:"security.web.components.change.this.number",defaultMessage:"I lost access to this phone number"}))),b.createElement(eP.Z,{errorMessage:o,onCodeInputChange:a}))),b.createElement("div",{className:"m-t-3"},b.createElement(g.Button,{htmlType:"submit",block:!0,disabled:s,loading:s},u.formatMessage({id:"security.web.components.done",defaultMessage:"Done"}))),c&&b.createElement("div",{className:"m-t-2"},b.createElement(g.Button,{type:"accent",priority:"tertiary",onClick:function(){return c()}},u.formatMessage({id:"security.web.components.didnt.receive.a.code",defaultMessage:"I didn’t receive a code"})))))};e$.defaultProps={voiceErrorMessage:null,loading:!1,onChangePhone:null,onVerifyAnotherWay:null};var e0=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),e1=function(){return(e1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},e2=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},e3=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={showApproveAnotherWayBtn:!0,showApproveAnotherWay:!1,voiceErrorMessage:null,codeInputValue:"",loading:!1,showLostAccessToNumber:!1},n.onNotReceivedAnythingBtnClick=n.onNotReceivedAnythingBtnClick.bind(n),n.onSubmitCode=n.onSubmitCode.bind(n),n.codeInputChange=n.codeInputChange.bind(n),n}return e0(t,e),t.prototype.onNotReceivedAnythingBtnClick=function(){(0,w.zE)("SCA_Web - Voice - Did Not Receive Anything"),this.setState({showApproveAnotherWay:!0,showApproveAnotherWayBtn:!1})},t.prototype.onSubmitCode=function(e){var t,n,r,o,a,s,i,l;return a=this,s=void 0,i=void 0,l=function(){var a,s,i,l,c,u,p,d,f,h,m,g,y,b;return e2(this,function(v){switch(v.label){case 0:if((0,w.zE)("SCA_Web - Voice - Code Submitted"),e.preventDefault(),s=(a=this.props).identityServiceHost,i=a.intl,l=a.oneTimeToken,c=a.getChallenges,u=a.onFailure,p=a.clientId,d=this.state.codeInputValue,f="SCA_Web - Voice - Verify Fail",!((h=d)&&6===h.length))return[3,6];return this.setState({loading:!0}),m="".concat(s).concat(_.voiceVerifyPath),g=(0,C.Z)({language:i.locale,oneTimeToken:l,clientId:p,ggow:null===(n=null===(t=this.context)||void 0===t?void 0:t.pcx)||void 0===n?void 0:n.ggow,mosc:null===(o=null===(r=this.context)||void 0===r?void 0:r.pcx)||void 0===o?void 0:o.mosc}),[4,fetch(m,e1(e1({method:"POST"},g),{body:JSON.stringify({otpCode:h})}))];case 1:if(!((y=v.sent())&&y.status>=200&&y.status<300))return[3,2];return(0,w.zE)("SCA_Web - Voice - Verify Pass"),c(),[3,5];case 2:if(!(y&&y.status>=400))return[3,4];return[4,y.json()];case 3:return(b=v.sent())&&("attempt_limit_reached"===b.code?((0,w.zE)(f,{error:!0,errorMessage:b&&b.code,statusCode:y.status}),window.location.href="/logout"):b.message&&((0,w.zE)(f,{error:!0,errorMessage:b&&b.message,statusCode:y.status}),this.setState({loading:!1,voiceErrorMessage:b&&b.message}))),[3,5];case 4:(0,w.zE)(f,{error:!0,statusCode:y.status}),u(),v.label=5;case 5:return[3,7];case 6:(0,w.zE)(f,{error:!0,statusCode:418,errorMessage:"Code length less than 6 or no code"}),u(),v.label=7;case 7:return[2]}})},new(i||(i=Promise))(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof i?o:new i(function(e){e(o)})).then(n,r)}o((l=l.apply(a,s||[])).next())})},t.prototype.codeInputChange=function(e){this.setState({codeInputValue:e})},t.prototype.render=function(){var e=this.props,t=e.alternateChallenges,n=e.currentChallenge,r=e.oneTimeToken,o=e.clientId,a=e.intent,s=e.intl,i=e.onShowChallenge,l=e.onSuccess,c=e.onFailure,u=e.phoneNumberId,p=this.state,d=p.showApproveAnotherWayBtn,f=p.showApproveAnotherWay,h=p.voiceErrorMessage,m=p.loading,y=n.viewData[u].header,v=n.viewData[u].message;return f?b.createElement(er,{token:r,clientId:o,currentChallenge:n,alternateChallenges:t,onShowChallenge:i}):b.createElement(b.Fragment,null,b.createElement(e$,{onSuccess:l,onFailure:c,voiceTitle:y,voiceSubtitle:v,onSubmitCode:this.onSubmitCode,voiceErrorMessage:h,codeInputChange:this.codeInputChange,loading:m,intent:a}),b.createElement(ej.Z,null),d&&b.createElement(eA.Z,{delay:1e4,onClick:this.onNotReceivedAnythingBtnClick},s.formatMessage({id:"security.web.components.didnt.receive.a.code",defaultMessage:"I didn’t receive a code"})),!d&&b.createElement("div",{className:"m-t-4"},b.createElement(g.Link,{href:"/help/24/technical-issues/2960087/what-if-i-lose-my-phone-or-cant-receive-a-text",target:"_blank",rel:"noopener noreferrer",type:"link-large"},s.formatMessage({id:"security.web.components.need.some.help",defaultMessage:"Need some help?"}))))},t.contextType=y.ProfilerContext,t}(b.Component),e4=(0,v.ZP)(e3),e6=(l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),e5=function(){return(e5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},e7=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},e8=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},e9=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={showVerify:!1,loading:!0},n}return e6(t,e),t.prototype.componentDidMount=function(){return e7(this,void 0,void 0,function(){var e;return e8(this,function(t){switch(t.label){case 0:return e=this.props.phoneNumberId,(0,w.zE)("SCA_Web - Page View - Voice Login",{phoneNumberId:e}),[4,this.postTrigger()];case 1:return t.sent(),[2]}})})},t.prototype.postTrigger=function(){return e7(this,void 0,void 0,function(){var e,t,n,r,o,a,s,i,l,c,u,p;return e8(this,function(d){switch(d.label){case 0:t=(e=this.props).identityServiceHost,n=e.intl,r=e.oneTimeToken,o=e.clientId,a=e.onFailure,s=e.phoneNumberId,i="".concat(t).concat(_.voiceTriggerPath),l=(0,C.Z)({language:n.locale,oneTimeToken:r,clientId:o}),d.label=1;case 1:return d.trys.push([1,6,,7]),[4,fetch(i,e5(e5({method:"POST"},l),{body:JSON.stringify({phoneNumberId:s})}))];case 2:if(!((c=d.sent())&&c.status>=200&&c.status<300))return[3,3];return(0,w.zE)("SCA_Web - Voice - Trigger Pass",{phoneNumberId:s}),this.setState({showVerify:!0,loading:!1}),[3,5];case 3:if(!(c&&c.status>=400))return[3,5];return[4,c.json()];case 4:(u=d.sent())&&u.message&&((0,w.zE)("SCA_Web - Voice - Trigger Fail",{error:!0,errorMessage:u&&u.message,statusCode:c.status,phoneNumberId:s}),a(u.message)),d.label=5;case 5:return[3,7];case 6:return p=d.sent(),(0,w.zE)("SCA_Web - Voice - Trigger Fail",{error:!0,errorMessage:JSON.stringify(p),statusCode:418,phoneNumberId:s}),a(),[3,7];case 7:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,n=e.showVerify;return t?b.createElement(V,null):n?b.createElement(e4,e5({},this.props)):null},t}(b.Component),te=(0,v.ZP)(e9),tt=(c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tn=function(){return(tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tr=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},to=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={showApproveAnotherWayBtn:!0,whatsappHasError:!1,whatsappErrorMessage:null,showApproveAnotherWay:!1,codeInputValue:"",loading:!1,showLostAccessToNumber:!1},n.onNotReceivedAnythingBtnClick=n.onNotReceivedAnythingBtnClick.bind(n),n.onSubmitCode=n.onSubmitCode.bind(n),n.codeInputChange=n.codeInputChange.bind(n),n}return tt(t,e),t.prototype.onNotReceivedAnythingBtnClick=function(){(0,w.zE)("SCA_Web - WhatsApp - Did Not Receive Anything"),this.setState({showApproveAnotherWay:!0,showApproveAnotherWayBtn:!1})},t.prototype.onSubmitCode=function(e){var t,n,r,o,a,s,i,l;return a=this,s=void 0,i=void 0,l=function(){var a,s,i,l,c,u,p,d,f,h,m,g,y,b;return tr(this,function(v){switch(v.label){case 0:if((0,w.zE)("SCA_Web - WhatsApp - Code Submitted"),e.preventDefault(),s=(a=this.props).identityServiceHost,i=a.intl,l=a.oneTimeToken,c=a.getChallenges,u=a.onFailure,p=a.clientId,d=this.state.codeInputValue,f="SCA_Web - WhatsApp - Verify Fail",!((h=d)&&6===h.length))return[3,6];return this.setState({loading:!0}),m="".concat(s).concat(_.whatsappVerifyPath),g=(0,C.Z)({language:i.locale,oneTimeToken:l,clientId:p,ggow:null===(n=null===(t=this.context)||void 0===t?void 0:t.pcx)||void 0===n?void 0:n.ggow,mosc:null===(o=null===(r=this.context)||void 0===r?void 0:r.pcx)||void 0===o?void 0:o.mosc}),[4,fetch(m,tn(tn({method:"POST"},g),{body:JSON.stringify({otpCode:h})}))];case 1:if(!((y=v.sent())&&y.status>=200&&y.status<300))return[3,2];return(0,w.zE)("SCA_Web - WhatsApp - Verify Pass"),c(),[3,5];case 2:if(!(y&&y.status>=400))return[3,4];return[4,y.json()];case 3:return(b=v.sent())&&("attempt_limit_reached"===b.code?((0,w.zE)(f,{error:!0,errorMessage:b&&b.code,statusCode:y.status}),window.location.href="/logout"):b.message&&((0,w.zE)(f,{error:!0,errorMessage:b&&b.message,statusCode:y.status}),this.setState({whatsappHasError:!0,loading:!1,whatsappErrorMessage:b&&b.message}))),[3,5];case 4:(0,w.zE)(f,{error:!0,statusCode:y.status}),u(),v.label=5;case 5:return[3,7];case 6:(0,w.zE)(f,{error:!0,statusCode:418,errorMessage:"Code length less than 6 or no code"}),u(),v.label=7;case 7:return[2]}})},new(i||(i=Promise))(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof i?o:new i(function(e){e(o)})).then(n,r)}o((l=l.apply(a,s||[])).next())})},t.prototype.codeInputChange=function(e){this.setState({codeInputValue:e})},t.prototype.render=function(){var e=this.props,t=e.alternateChallenges,n=e.currentChallenge,r=e.oneTimeToken,o=e.clientId,a=e.intent,s=e.onShowChallenge,i=e.onSuccess,l=e.onFailure,c=e.phoneNumberId,u=e.intl,p=this.state,d=p.showApproveAnotherWayBtn,f=p.showApproveAnotherWay,h=p.whatsappHasError,m=p.whatsappErrorMessage,y=p.codeInputValue,v=p.loading,w=n.viewData[c].header,E=n.viewData[c].message;return f?b.createElement(er,{token:r,clientId:o,currentChallenge:n,alternateChallenges:t,onShowChallenge:s}):b.createElement(b.Fragment,null,b.createElement(eZ,{onSuccess:i,onFailure:l,smsTitle:w,smsSubtitle:E,onSubmitCode:this.onSubmitCode,smsHasError:h,smsErrorMessage:m,codeInputValue:y,codeInputChange:this.codeInputChange,loading:v,intent:a}),b.createElement(ej.Z,null),d&&b.createElement(eA.Z,{delay:1e4,onClick:this.onNotReceivedAnythingBtnClick},u.formatMessage({id:"security.web.components.didnt.receive.a.code",defaultMessage:"I didn’t receive a code"})),!d&&b.createElement("div",{className:"m-t-4"},b.createElement(g.Link,{href:"/help/24/technical-issues/2960087/what-if-i-lose-my-phone-or-cant-receive-a-text",target:"_blank",rel:"noopener noreferrer",type:"link-large"},u.formatMessage({id:"security.web.components.need.some.help",defaultMessage:"Need some help?"}))))},t.contextType=y.ProfilerContext,t}(b.Component),ta=(0,v.ZP)(to),ts=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ti=function(){return(ti=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tl=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},tc=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tu=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={showVerify:!1,loading:!0},n}return ts(t,e),t.prototype.componentDidMount=function(){return tl(this,void 0,void 0,function(){return tc(this,function(e){switch(e.label){case 0:return(0,w.zE)("SCA_Web - Page View - WhatsApp Login"),[4,this.postTrigger()];case 1:return e.sent(),[2]}})})},t.prototype.postTrigger=function(){return tl(this,void 0,void 0,function(){var e,t,n,r,o,a,s,i,l,c,u,p;return tc(this,function(d){switch(d.label){case 0:t=(e=this.props).identityServiceHost,n=e.intl,r=e.oneTimeToken,o=e.clientId,a=e.onFailure,s=e.phoneNumberId,i="".concat(t).concat(_.whatsappTriggerPath),l=(0,C.Z)({language:n.locale,oneTimeToken:r,clientId:o}),d.label=1;case 1:return d.trys.push([1,6,,7]),[4,fetch(i,ti(ti({method:"POST"},l),{body:JSON.stringify({phoneNumberId:s})}))];case 2:if(!((c=d.sent())&&c.status>=200&&c.status<300))return[3,3];return(0,w.zE)("SCA_Web - WhatsApp - Trigger Pass"),this.setState({showVerify:!0,loading:!1}),[3,5];case 3:if(!(c&&c.status>=400))return[3,5];return[4,c.json()];case 4:(u=d.sent())&&u.message&&((0,w.zE)("SCA_Web - WhatsApp - Trigger Fail",{error:!0,errorMessage:u&&u.message,statusCode:c.status}),a(u.message)),d.label=5;case 5:return[3,7];case 6:return p=d.sent(),(0,w.zE)("SCA_Web - WhatsApp - Trigger Fail",{error:!0,errorMessage:JSON.stringify(p),statusCode:418}),a(),[3,7];case 7:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,n=e.showVerify;return t?b.createElement(V,null):n?b.createElement(ta,ti({},this.props)):null},t}(b.Component),tp=(0,v.ZP)(tu),td=function(e){var t=th(e);if(t.length>0){var n=tg([t[0].primaryChallenge]);return n.length>0?n[0]:tg(tf(e))[0]}return null},tf=function(e){var t=th(e);return(null==t?void 0:t.length)>0?tg(t[0].alternatives):null},th=function(e){var t=e&&e.oneTimeTokenProperties;return((null==t?void 0:t.challenges)||[]).filter(function(e){return e.required})},tm=Object.values(R),tg=function(e){return e.filter(function(e){return tm.includes(e.type)})},ty=n(5121),tb=n(32431),tv=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tw=function(e){var t,n,r,o,a=e.language,s=e.clientId,i=e.oneTimeToken,l=e.profilerContext;return t=void 0,n=void 0,r=void 0,o=function(){var e,t,n;return tv(this,function(r){return t=(e=null!=l?l:{}).ggow,n=e.mosc,[2,ty.Z.post("".concat(tb.LH,"/forgot-password"),null,(0,C.Z)({language:a,oneTimeToken:i,clientId:s,ggow:t,mosc:n}))]})},new(r||(r=Promise))(function(e,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,i)}l((o=o.apply(t,n||[])).next())})};n(67544);var tE=function(e){var t=e.type,n=void 0===t?"RESET_PASSWORD":t,r=e.gotItClicked,o=(0,E.Z)();return b.createElement("div",{className:"text-xs-center checkemail-container"},b.createElement("div",null,b.createElement(M.a,{size:M.S.SMALL,name:M.A.EMAIL,alt:""}),b.createElement("div",{className:"m-t-4"},b.createElement("h2",{className:"checkemail-title"},o.formatMessage({id:"security.web.components.check.email.title",defaultMessage:"Check your email"})),b.createElement("p",{className:"m-t-2 m-b-0"},"RESET_PASSWORD"===n?b.createElement(j.Z,{id:"security.web.components.check.email.reset.password.subtitle",defaultMessage:"We sent an email to your registered email address with instructions to reset your password."}):b.createElement(j.Z,{id:"security.web.components.check.email.phone.number.change.subtitle",defaultMessage:"We sent an email to your registered email address with instructions to change your number."})),b.createElement("p",{className:"checkemail-spam-folder m-t-2 m-b-0"},o.formatMessage({id:"security.web.components.check.email.spam.folder",defaultMessage:"If you don't get the email soon, please check your spam folder."})))),b.createElement("div",{className:"m-t-2"},b.createElement(g.Button,{block:!0,onClick:function(){return r()}},o.formatMessage({id:"security.web.components.check.email.button",defaultMessage:"Got it"}))))},tS=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tC={SUCCESS:"Password Challenge - Reset Password - Success",FAILURE:"Password Challenge - Reset Password - Failure"},t_=function(e){var t=e.secondaryAction,n=e.onSuccess,r=e.oneTimeToken,o=(0,E.Z)(),a=(0,b.useState)(),s=a[0],i=a[1],l=(0,b.useState)(),c=l[0],u=l[1],p=(0,b.useState)(),d=p[0],f=p[1],h=(0,y.useProfiler)().pcx,m=function(){var e,t,n,a;return e=void 0,t=void 0,n=void 0,a=function(){var e,t;return tS(this,function(n){switch(n.label){case 0:u(!1),i(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,tw({language:o.locale,oneTimeToken:r,profilerContext:h})];case 2:return n.sent(),(0,w.zE)(tC.SUCCESS),f(!0),[3,5];case 3:return e=n.sent(),t=(0,z.Z)(e),(0,w.zE)(tC.FAILURE,{code:null==t?void 0:t.code}),u(!0),[3,5];case 4:return i(!1),[7];case 5:return[2]}})},new(n||(n=Promise))(function(r,o){function s(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((a=a.apply(e,t||[])).next())})};return d?b.createElement(tE,{type:"RESET_PASSWORD",gotItClicked:n}):b.createElement("div",{className:"text-xs-center"},b.createElement("form",{method:"post",onSubmit:function(e){e.preventDefault(),m()}},b.createElement(M.a,{className:"center-block",name:M.A.KEY,alt:"",size:M.S.SMALL}),b.createElement("div",{className:"m-t-4"},c?b.createElement(g.Alert,{type:g.Sentiment.NEGATIVE,action:{href:"/help/contact",target:"_blank",text:o.formatMessage({id:"security.web.components.forgot.password.error.message.contact.us",defaultMessage:"Please contact us."})},message:o.formatMessage({id:"security.web.components.forgot.password.error.message",defaultMessage:"Something went wrong"})}):b.createElement(b.Fragment,null,b.createElement("h2",null,o.formatMessage({id:"security.web.components.forgot.password.reset",defaultMessage:"Reset password"})),b.createElement("p",null,o.formatMessage({id:"security.web.components.forgot.password.reset.subtitle",defaultMessage:"We'll email you instructions to reset your password."})),b.createElement(g.Button,{block:!0,htmlType:"submit",loading:s},o.formatMessage({id:"security.web.components.reset.password",defaultMessage:"Send password reset link"}))))),t&&b.createElement(g.Button,{className:"m-t-1",type:"accent",priority:"tertiary",disabled:s,onClick:function(){return null==t?void 0:t.action()}},t.labelText))},tM=n(94184),tk=n.n(tM),tT=n(25548),tP=function(e){var t=e.onSubmitPassword,n=e.passwordTitle,r=e.passwordSubtitle,o=e.userAlertMessage,a=e.userAlertClassName,s=e.placeholder,i=e.passwordHasError,l=e.passwordErrorMessage,c=e.passwordClassName,u=e.onPasswordChange,p=e.loading,d=(0,E.Z)();return b.createElement("div",{className:"text-xs-center password-container"},b.createElement("form",{noValidate:!0,method:"post",className:"text-xs-center",onSubmit:t},b.createElement("div",null,b.createElement("div",{className:"m-t-4"},b.createElement("h2",null,n),r&&b.createElement("p",{className:"m-t-2 m-b-4"},r),o&&b.createElement("div",{className:tk()("m-b-4 alert-success text-xs-center p-a-2",a),dangerouslySetInnerHTML:{__html:o}}),b.createElement(tT.Z,{placeholder:s,errorMessage:i&&l,className:c,onPasswordChange:u}))),b.createElement("div",{className:"m-t-3"},b.createElement(g.Button,{htmlType:"submit",block:!0,disabled:p,loading:p},d.formatMessage({id:"security.web.components.done",defaultMessage:"Done"})))))},tA=(p=function(e,t){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tN=function(){return(tN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tx=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tI=function(e){function t(t){var n=e.call(this,t)||this;n.props=t;var r=0===n.props.alternateChallenges.length||1===n.props.alternateChallenges.length&&"BIOMETRIC"===n.props.alternateChallenges[0].type;return n.state={showApproveAnotherWayBtn:!r,showApproveAnotherWay:!1,showForgotPassword:!1,isPasswordEmpty:!1,passwordHasError:!1,passwordErrorMessage:null,passwordFieldValue:null,loading:!1},n.onNotReceivedAnythingBtnClick=n.onNotReceivedAnythingBtnClick.bind(n),n.onForgotPasswordBtnClick=n.onForgotPasswordBtnClick.bind(n),n.onForgotPasswordBackBtnClick=n.onForgotPasswordBackBtnClick.bind(n),n.onSubmitPassword=n.onSubmitPassword.bind(n),n.onPasswordChange=n.onPasswordChange.bind(n),n}return tA(t,e),t.prototype.componentDidMount=function(){(0,w.zE)("SCA_Web - Page View - Password Challenge")},t.prototype.onNotReceivedAnythingBtnClick=function(){(0,w.zE)("SCA_Web - Password Challenge - Did Not Receive Anything"),this.setState({showApproveAnotherWay:!0,showApproveAnotherWayBtn:!1})},t.prototype.onForgotPasswordBtnClick=function(){(0,w.zE)("SCA_Web - Password Challenge - Forgot Password Clicked"),this.setState({passwordHasError:!1,passwordErrorMessage:null,showForgotPassword:!0,loading:!1})},t.prototype.onForgotPasswordBackBtnClick=function(){(0,w.zE)("SCA_Web - Password Challenge - Forgot Password Back Clicked"),this.setState({showForgotPassword:!1,loading:!1,passwordHasError:!1,passwordErrorMessage:null})},t.prototype.onPasswordChange=function(e){this.setState({passwordFieldValue:e,isPasswordEmpty:!e})},t.prototype.onSubmitPassword=function(e){var t,n,r,o,a,s,i,l;return a=this,s=void 0,i=void 0,l=function(){var a,s,i,l,c,u,p;return tx(this,function(d){switch(d.label){case 0:if(e.preventDefault(),a=this.props.intl,i=!(s=this.state.passwordFieldValue)||0===s.trim().length,this.setState({isPasswordEmpty:i}),!s)return[3,5];return this.setState({loading:!0}),(0,w.zE)("SCA_Web - Password Challenge - Submit Password - submitted",{error:!1}),l="".concat(this.props.identityServiceHost).concat(_.passwordVerifyPath),c=(0,C.Z)({language:a.locale,oneTimeToken:this.props.oneTimeToken,clientId:this.props.clientId,ggow:null===(n=null===(t=this.context)||void 0===t?void 0:t.pcx)||void 0===n?void 0:n.ggow,mosc:null===(o=null===(r=this.context)||void 0===r?void 0:r.pcx)||void 0===o?void 0:o.mosc}),[4,fetch(l,tN(tN({method:"POST"},c),{body:JSON.stringify({password:s})}))];case 1:if(!((u=d.sent())&&u.status>=200&&u.status<300))return[3,2];return(0,w.zE)("SCA_Web - Password Challenge - Submit Password - success",{error:!1}),this.setState({passwordHasError:!1,passwordErrorMessage:null,loading:!1}),this.props.getChallenges(),[3,5];case 2:if(!(u&&u.status>=400))return[3,4];return[4,u.json()];case 3:return(p=d.sent())&&((0,w.zE)("SCA_Web - Password Challenge - Submit Password - fail",{error:!0,errorMessage:p.message,errorCode:p.code,statusCode:u.status}),"attempt_limit_reached"===p.code?window.location.href="/logout":p.message&&this.setState({passwordHasError:!0,loading:!1,passwordErrorMessage:p.message})),[3,5];case 4:(0,w.zE)("SCA_Web - Password Challenge - Submit Password - fail",{error:!0,errorMessage:null,errorCode:null,statusCode:-1}),this.props.onFailure(),d.label=5;case 5:return[2]}})},new(i||(i=Promise))(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof i?o:new i(function(e){e(o)})).then(n,r)}o((l=l.apply(a,s||[])).next())})},t.prototype.render=function(){var e=this,t=this.props,n=t.currentChallenge,r=t.onShowChallenge,o=t.alternateChallenges,a=t.onSuccess,s=t.userAlertMessage,i=t.userAlertClassName,l=t.intent,c=t.intl,u=t.oneTimeToken,p=t.clientId,d=n.viewData&&n.viewData.attributes.header,f=n.viewData&&n.viewData.attributes.message,h=this.state,m=h.passwordHasError,y=h.passwordErrorMessage,v=this.state,w=v.showApproveAnotherWay,E=v.showForgotPassword,S=v.isPasswordEmpty,C=v.loading,_=v.showApproveAnotherWayBtn;return(S&&(m=!0,y=c.formatMessage({id:"security.web.components.form.required.field",defaultMessage:"Please fill this field"})),w)?b.createElement(er,{token:u,clientId:p,currentChallenge:n,alternateChallenges:o,onShowChallenge:r}):E?b.createElement(b.Fragment,null,b.createElement(t_,{oneTimeToken:u,secondaryAction:{action:function(){return e.onForgotPasswordBackBtnClick()},labelText:c.formatMessage({id:"security.web.components.password-challenge.go-back",defaultMessage:"Back to password"})},onSuccess:a})):b.createElement(b.Fragment,null,!E&&b.createElement(tP,{passwordTitle:d,passwordSubtitle:f,onPasswordChange:this.onPasswordChange,onSubmitPassword:this.onSubmitPassword,passwordHasError:m,passwordErrorMessage:y,loading:C,userAlertMessage:s,userAlertClassName:i,intent:l}),_&&b.createElement(g.Button,{type:"accent",priority:"tertiary",className:"m-t-2",onClick:this.onNotReceivedAnythingBtnClick},c.formatMessage({id:"security.web.components.approve.another.way",defaultMessage:"Approve another way"})),!_&&b.createElement(g.Button,{type:"accent",priority:"tertiary",className:"m-t-1",onClick:this.onForgotPasswordBtnClick,disabled:C},c.formatMessage({id:"security.web.components.forgot.password",defaultMessage:"Forgot password?"})))},t.contextType=y.ProfilerContext,t}(b.Component);tI.defaultProps={userAlertMessage:null,userAlertClassName:null};var tO=(0,v.ZP)(tI);n(83209);var tR=function(e){var t=e.phoneGuessHasError,n=e.loading,r=e.phoneGuessErrorMessage,o=e.onPhoneGuessChange,a=e.onPhoneGuessSubmit,s=e.phoneGuessTitle,i=e.phoneGuessSubtitle,l=e.hiddenNumbers,c=e.firstNumbers,u=e.lastNumbers,p=(0,E.Z)(),d="*".repeat(l);return b.createElement("div",{className:tk()("text-xs-center form-group phone-guess-container",{"has-error":t})},b.createElement("form",{noValidate:!0,method:"post",className:"text-xs-center",onSubmit:a},b.createElement("div",{className:"m-b-4"},b.createElement("div",{className:"phone-guess-image-container"},b.createElement(M.a,{size:M.S.SMALL,name:M.A.KEY,alt:""})),b.createElement("div",{className:"m-t-4"},b.createElement("h2",null,s),b.createElement("p",{className:"m-t-2"},i))),b.createElement("div",{className:"m-b-4 m-t-4 phone-guess-input"},b.createElement("div",{className:tk()("m-b-2 input-group",{"has-error ng-invalid-required":t})},b.createElement("span",{className:"prompt-number"},c),b.createElement("span",null,b.createElement("input",{name:"missing-numbers",className:"form-control phone-guess m-l-2 m-r-2 prompt-number",type:"number",onInput:function(e){e.target.value=e.target.value.slice(0,l)},onChange:o,placeholder:d})),b.createElement("span",{className:"prompt-number"},u)),t&&r&&b.createElement("div",{className:"error-messages"},b.createElement("div",{className:"error-required text-xs-left"},r))),b.createElement("div",{className:"m-t-4"},b.createElement("button",{type:"submit",className:"btn btn-primary m-t-2 btn-block",disabled:n},b.createElement("div",null,p.formatMessage({id:"security.web.components.continue",defaultMessage:"Continue"}),n&&b.createElement("span",{style:{float:"right"},className:"btn-loader"})))),b.createElement("div",{className:"m-t-3"},b.createElement("span",{className:"m-r-1"},p.formatMessage({id:"security.web.components.remembered.password",defaultMessage:"Remembered your password?"})),b.createElement("a",{href:"/login",role:"button","aria-label":"login"},p.formatMessage({id:"security.web.components.login",defaultMessage:"Log in"})))))};tR.defaultProps={loading:!1,phoneGuessHasError:!1,phoneGuessErrorMessage:null};var tz=(d=function(e,t){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tD=function(){return(tD=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tW=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tF=function(e){function t(t){var n=e.call(this,t)||this;return n.props=t,n.state={},n.state={phoneGuessHasError:!1,phoneGuessErrorMessage:null,loading:!1},n.onPhoneGuessChange=n.onPhoneGuessChange.bind(n),n.onPhoneGuessSubmit=n.onPhoneGuessSubmit.bind(n),n}return tz(t,e),t.prototype.componentDidMount=function(){(0,w.zE)("SCA_web_view_phone_guess_challenge",{primaryChallenge:"phone_guess",error:!1,intent:this.props.intent})},t.prototype.onPhoneGuessChange=function(e){e.preventDefault(),this.setState({phoneGuessHasError:!1,phoneGuessErrorMessage:null})},t.prototype.onPhoneGuessSubmit=function(e){var t,n,r,o,a;return n=this,r=void 0,o=void 0,a=function(){var n,r,o,a,s,i;return tW(this,function(l){switch(l.label){case 0:if(e.preventDefault(),n=this.props.intl,!(!(r=null===(t=e.target.elements["missing-numbers"])||void 0===t?void 0:t.value)||0===r.trim().length))return[3,1];return this.setState({phoneGuessHasError:!0,phoneGuessErrorMessage:n.formatMessage({id:"security.web.components.form.required.field",defaultMessage:"Please fill this field"})}),[3,6];case 1:return this.setState({loading:!0,phoneGuessHasError:!1,phoneGuessErrorMessage:null}),(0,w.zE)("SCA_web_submitting_phone_guess",{primaryChallenge:"phone_guess",error:!1,intent:this.props.intent}),o="".concat(this.props.identityServiceHost).concat(_.phoneGuessVerifyPath),a=(0,C.Z)({language:n.locale,oneTimeToken:this.props.oneTimeToken,clientId:this.props.clientId}),[4,fetch(o,tD(tD({method:"POST"},a),{body:JSON.stringify({missingNumbers:r})}))];case 2:if(!((s=l.sent())&&s.status>=200&&s.status<300))return[3,3];return(0,w.zE)("SCA_web_phone_guess_submit_success",{primaryChallenge:"phone_guess",error:!1,intent:this.props.intent}),this.setState({phoneGuessHasError:!1,phoneGuessErrorMessage:null,loading:!1}),this.props.getChallenges(),[3,6];case 3:if(!(s&&s.status>=400))return[3,5];return[4,s.json()];case 4:return(i=l.sent())?((0,w.zE)("SCA_web_phone_guess_submit_fail",{primaryChallenge:"phone_guess",error:!0,errorMessage:i.message,errorCode:i.code,intent:this.props.intent}),"attempt_limit_reached"===i.code?window.location.href="/logout":i.message&&this.setState({phoneGuessHasError:!0,loading:!1,phoneGuessErrorMessage:i.message})):this.setState({phoneGuessHasError:!0,loading:!1,phoneGuessErrorMessage:n.formatMessage({id:"security.web.components.forgot.password.error.message",defaultMessage:"Something went wrong"})}),[3,6];case 5:(0,w.zE)("SCA_web_phone_guess_submit_fail",{primaryChallenge:"phone_guess",error:!0,errorMessage:null,errorCode:null,intent:this.props.intent}),this.props.onFailure(),l.label=6;case 6:return[2]}})},new(o||(o=Promise))(function(e,t){function s(e){try{l(a.next(e))}catch(e){t(e)}}function i(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof o?n:new o(function(e){e(n)})).then(s,i)}l((a=a.apply(n,r||[])).next())})},t.prototype.render=function(){var e=this.props.currentChallenge.viewData&&this.props.currentChallenge.viewData.attributes.header,t=this.props.currentChallenge.viewData&&this.props.currentChallenge.viewData.attributes.message,n=this.props.currentChallenge.viewData&&this.props.currentChallenge.viewData.attributes.firstPhoneNumbers,r=this.props.currentChallenge.viewData&&this.props.currentChallenge.viewData.attributes.lastPhoneNumbers,o=this.props.currentChallenge.viewData&&this.props.currentChallenge.viewData.attributes.hiddenNumbers,a=this.state,s=a.phoneGuessHasError,i=a.phoneGuessErrorMessage,l=a.loading;return b.createElement(tR,{phoneGuessTitle:e,phoneGuessSubtitle:t,onPhoneGuessChange:this.onPhoneGuessChange,onPhoneGuessSubmit:this.onPhoneGuessSubmit,firstNumbers:n,lastNumbers:r,hiddenNumbers:o,phoneGuessHasError:s,phoneGuessErrorMessage:i,loading:l})},t}(b.Component),tL=(0,v.ZP)(tF);n(98158),n(2001);var tV=function(e){var t=e.title,n=e.subtitle,r=e.rejectedPhoneChangeText,o=void 0===r?"":r,a=e.toDoTitle,s=e.toDos;return b.createElement("div",null,b.createElement("h2",{className:"m-b-5"},t),o&&b.createElement("p",{className:"m-b-2"},o),b.createElement("p",{className:"m-b-5",dangerouslySetInnerHTML:{__html:n}}),b.createElement("p",{className:"m-b-0 font-weight-bold"},a),b.createElement("hr",{className:"selfie-with-id-instructions__separator m-l-0"}),b.createElement("ul",{className:"text-primary selfie-with-id-instructions__todo-list"},Array.isArray(s)&&s.map(function(e){return b.createElement("li",{key:e,dangerouslySetInnerHTML:{__html:e}})})))};n(61041);var tZ=function(e){var t=e.buttonText,n=e.uploadPlaceholder,r=e.uploadButtonText,o=e.uploadCompletedText,a=e.tooLargeMessageText,s=e.uploadNewphotoText,i=e.clickToEnlargeText,l=e.loading,c=e.onImageUploadStarted,u=e.onImageUploadSuccessfully,p=e.onImageUploadFailure,d=e.onImageUploadCancel,f=e.hasError,h=e.errorMessage,m=e.isImageUploadSuccessful,y=e.onSubmit,v=e.onUploadNewPhoto,w=e.imageBase64,E=e.onClickToEnlarge;return b.createElement("div",null,!m&&b.createElement(g.Upload,{animationDelay:B.Yb,maxSize:B.Yu,usPlaceholder:n,csSuccessText:o,csTooLargeMessage:a,csButtonText:s,usButtonText:r,onStart:c,onSuccess:u,onFailure:p,onCancel:d}),m&&b.createElement("div",null,b.createElement("img",{className:"img-responsive center-block selfie-uploaded",src:w,alt:"Selfie With ID",onClick:E,onKeyDown:function(){},role:"presentation"}),b.createElement("button",{type:"submit",className:"btn btn-link btn-block btn-sm",onClick:E},i)),f&&h&&b.createElement("div",{className:"m-t-1"},b.createElement(g.InlineAlert,null,h)),b.createElement("button",{type:"submit",className:tk()("btn btn-primary btn-block",{"m-t-2":m,"m-t-3":!m}),onClick:y,disabled:!m||l},b.createElement("div",null,t,l&&b.createElement("span",{style:{float:"right"},className:"btn-loader"}))),m&&b.createElement(g.Button,{type:"accent",priority:"secondary",className:"btn-block m-t-2",onClick:v,disabled:l,htmlType:"submit"},b.createElement("div",null,s)))};tZ.defaultProps={errorMessage:null,imageBase64:null};var tj=(f=function(e,t){return(f=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tB=function(e){function t(t){var n=e.call(this,t)||this;return n.state={showImageModal:!1},n.openImageOnModal=n.openImageOnModal.bind(n),n.closeImageOnModal=n.closeImageOnModal.bind(n),n}return tj(t,e),t.prototype.openImageOnModal=function(){this.setState({showImageModal:!0})},t.prototype.closeImageOnModal=function(){this.setState({showImageModal:!1})},t.prototype.render=function(){var e=this.props,t=e.title,n=e.subtitle,r=e.rejectedPhoneChangeText,o=e.toDoTitle,a=e.toDos,s=e.buttonText,i=e.uploadPlaceholder,l=e.uploadButtonText,c=e.uploadCompletedText,u=e.tooLargeMessageText,p=e.uploadNewphotoText,d=e.clickToEnlargeText,f=e.loading,h=e.onImageUploadStarted,m=e.onImageUploadSuccessfully,y=e.onImageUploadFailure,v=e.onImageUploadCancel,w=e.hasError,E=e.errorMessage,S=e.isImageUploadSuccessful,C=e.onSubmit,_=e.onUploadNewPhoto,M=e.imageBase64,k=this.state.showImageModal;return b.createElement("div",{className:"container"},k&&b.createElement(g.Modal,{open:!0,body:b.createElement("div",{className:"modal--selfie-with-id"},b.createElement("img",{className:"img-responsive center-block selfie-modal",src:M,alt:"Selfie With ID"})),onClose:this.closeImageOnModal}),b.createElement("div",{className:"row"},b.createElement("div",{className:"text-xs-left col-md-8 col-lg-6 col-lg-offset-1"},b.createElement(tV,{title:t,subtitle:n,rejectedPhoneChangeText:r,toDoTitle:o,toDos:a})),b.createElement("div",{className:"col-md-4 col-md-offset-0 col-sm-8 col-sm-offset-2"},b.createElement(tZ,{hasError:w,buttonText:s,onSubmit:C,uploadPlaceholder:i,onImageUploadSuccessfully:m,loading:f,imageBase64:M,onImageUploadStarted:h,uploadCompletedText:c,tooLargeMessageText:u,onClickToEnlarge:this.openImageOnModal,uploadNewphotoText:p,uploadButtonText:l,onUploadNewPhoto:_,clickToEnlargeText:d,isImageUploadSuccessful:S,onImageUploadCancel:v,onImageUploadFailure:y,errorMessage:E}))))},t}(b.Component);tB.defaultProps={errorMessage:null,rejectedPhoneChangeText:null,imageBase64:null};var tG=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tH=function(){return(tH=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tU=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tq=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isImageUploadSuccessful:!1,loading:!1,hasError:!1,errorMessage:null,uploadFile:null,imageBase64:null,isMobilePlatform:!1},n.onImageUploadStarted=n.onImageUploadStarted.bind(n),n.onImageUploadSuccessfully=n.onImageUploadSuccessfully.bind(n),n.onImageUploadFailure=n.onImageUploadFailure.bind(n),n.onImageUploadCancel=n.onImageUploadCancel.bind(n),n.onSubmit=n.onSubmit.bind(n),n.resetPhoto=n.resetPhoto.bind(n),n}return tG(t,e),t.prototype.componentDidMount=function(){if((0,w.zE)("SCA_web_view_selfie_with_id_challenge",{primaryChallenge:"selfie_with_id",error:!1,intent:this.props.intent}),window&&window.navigator){var e,t=!!(e=window.navigator)&&!!e.userAgent&&/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent);this.setState({isMobilePlatform:t})}},t.prototype.onImageUploadStarted=function(e){(0,w.zE)("SCA_web_view_selfie_with_id_upload_started",{primaryChallenge:"selfie_with_id",error:!1,intent:this.props.intent}),this.setState({uploadFile:e})},t.prototype.onImageUploadFailure=function(e){var t=e.statusText||"",n=e.status||"";(0,w.zE)("SCA_web_view_selfie_with_id_upload_failure",{primaryChallenge:"selfie_with_id",error:!0,intent:this.props.intent,errorMessage:t,errorCode:n}),this.setState({uploadFile:null})},t.prototype.onImageUploadCancel=function(){(0,w.zE)("SCA_web_view_selfie_with_id_upload_cancelled",{primaryChallenge:"selfie_with_id",error:!1,intent:this.props.intent,uploadFile:null})},t.prototype.onImageUploadSuccessfully=function(e){var t=this;(0,w.zE)("SCA_web_view_selfie_with_id_upload_success",{primaryChallenge:"selfie_with_id",error:!1,intent:this.props.intent}),setTimeout(function(){t.setState({isImageUploadSuccessful:!0,imageBase64:e})},0)},t.prototype.onSubmit=function(e){var t,n,r,o;return t=this,n=void 0,r=void 0,o=function(){var t,n,r,o,a,s,i,l,c,u;return tU(this,function(p){switch(p.label){case 0:if(e.preventDefault(),t=this.props.intl,r=(n=this.state).isImageUploadSuccessful,o=n.uploadFile,!r||!(o instanceof File))return[2];return a=null,o.size&&!Number.isNaN(o.size)&&(a=(o.size/1048576).toFixed(1)),(0,w.zE)("SCA_web_view_selfie_with_id_submitting",{primaryChallenge:"selfie_with_id",error:!1,intent:this.props.intent}),(s=this.props.currentChallenge.viewData&&this.props.currentChallenge.viewData.attributes&&this.props.currentChallenge.viewData.attributes.uploadPath)||((0,w.zE)("SCA_web_view_selfie_with_id_submitting",{primaryChallenge:"selfie_with_id",error:!0,intent:this.props.intent,errorMessage:"no document upload path"}),this.props.onFailure()),this.setState({loading:!0}),i=(0,C.Z)({language:t.locale,oneTimeToken:this.props.oneTimeToken,clientId:this.props.clientId,excludeContentType:!0}),(l=new FormData).append("file",o),l.append("purpose",B.Xq),l.append("sourceOfUpload",B.lG),[4,fetch(s,tH(tH({method:"POST"},i),{body:l}))];case 1:if(!((c=p.sent())&&c.status>=200&&c.status<300))return[3,2];return(0,w.zE)("SCA_web_view_selfie_with_id_submit_success",{primaryChallenge:"selfie_with_id",uploadFileSizeMB:a,error:!1,intent:this.props.intent}),this.setState({hasError:!1,errorMessage:null,loading:!1}),this.props.onSuccess(),[3,8];case 2:if(!(c&&c.status>=400))return[3,7];p.label=3;case 3:return p.trys.push([3,5,,6]),[4,c.json()];case 4:return(u=p.sent())&&u.message?((0,w.zE)("SCA_web_view_selfie_with_id_submit_fail",{primaryChallenge:"selfie_with_id",uploadFileSizeMB:a,error:!0,errorMessage:u.message,errorCode:u.code,intent:this.props.intent}),this.setState({hasError:!0,errorMessage:u.message,loading:!1})):((0,w.zE)("SCA_web_view_selfie_with_id_submit_fail",{primaryChallenge:"selfie_with_id",uploadFileSizeMB:a,error:!0,errorMessage:"Submit fail - no message specified",errorCode:c.code,intent:this.props.intent}),this.setState({hasError:!0,loading:!1,errorMessage:t.formatMessage({id:"security.web.components.selfie.with.id.challenge.error.message",defaultMessage:"Something went wrong."})})),[3,6];case 5:return p.sent(),this.setState({hasError:!0,loading:!1,errorMessage:t.formatMessage({id:"security.web.components.selfie.with.id.challenge.error.message",defaultMessage:"Something went wrong."})}),(0,w.zE)("SCA_web_view_selfie_with_id_submit_fail",{primaryChallenge:"selfie_with_id",uploadFileSizeMB:a,error:!0,errorMessage:"Submit fail - Invalid JSON",errorCode:c.status,intent:this.props.intent}),[3,6];case 6:return[3,8];case 7:(0,w.zE)("SCA_web_view_selfie_with_id_submit_fail",{primaryChallenge:"selfie_with_id",uploadFileSizeMB:a,error:!0,errorMessage:null,errorCode:null,intent:this.props.intent}),this.setState({loading:!1}),this.props.onFailure(),p.label=8;case 8:return[2]}})},new(r||(r=Promise))(function(e,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,i)}l((o=o.apply(t,n||[])).next())})},t.prototype.getRejectionSreenPhoneChangeText=function(e){var t=this.props.intl;return e&&e.viewData&&e.viewData.attributes&&e.viewData.attributes.currentPhoneNumber&&e.viewData.attributes.newPhoneNumber?t.formatMessage({id:"security.web.components.selfie.with.id.rejection.phone.change.paragraph",defaultMessage:"You are changing your phone number from <strong>{currentPhoneNumber}</strong> to <strong>{newPhoneNumber}</strong>."},{strong:function(e){return b.createElement("strong",null,e)},newPhoneNumber:e.viewData.attributes.newPhoneNumber,currentPhoneNumber:e.viewData.attributes.currentPhoneNumber}):null},t.prototype.resetPhoto=function(){this.setState({isImageUploadSuccessful:!1,imageBase64:null,uploadFile:null,hasError:!1,errorMessage:null})},t.prototype.render=function(){var e=this.state,t=e.isImageUploadSuccessful,n=e.loading,r=e.hasError,o=e.errorMessage,a=e.imageBase64,s=e.isMobilePlatform,i=this.props,l=i.currentChallenge,c=i.intl,u=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.title",defaultMessage:"Upload and review your selfie"}),p=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.subtitle",defaultMessage:"We only accept <strong>a passport, national ID, or a driver's licence</strong> to verify your identity."}),d=this.getRejectionSreenPhoneChangeText(l),f=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.toDoTitle",defaultMessage:"Your selfie must show"}),h=[c.formatMessage({id:"security.web.components.selfie.with.id.challenge.todo.first",defaultMessage:"your <strong>full face and ID</strong>"}),c.formatMessage({id:"security.web.components.selfie.with.id.challenge.todo.second",defaultMessage:"the <strong>first name</strong> and <strong>last name</strong> on your ID"}),c.formatMessage({id:"security.web.components.selfie.with.id.challenge.todo.third",defaultMessage:"the <strong>first name</strong> and <strong>last name</strong> on your ID"})],m=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.button",defaultMessage:"Submit"}),g=s?c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.placeholder.mobile",defaultMessage:"Please make sure your selfie meets the points listed"}):c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.placeholder",defaultMessage:"Drag and drop a file less than 10MB"}),y=s?c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.button.mobile",defaultMessage:"Upload selfie"}):c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.button",defaultMessage:"Or select file"}),v=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.completed",defaultMessage:"Selfie photo completed!"}),w=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.file.too.large.message",defaultMessage:"Please provide a file smaller than 10MB"}),E=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.newphoto",defaultMessage:"Upload new selfie"}),S=c.formatMessage({id:"security.web.components.selfie.with.id.challenge.upload.button.click-to-enlarge",defaultMessage:"Click to enlarge"});return b.createElement(tB,{title:u,subtitle:p,rejectedPhoneChangeText:d,toDoTitle:f,toDos:h,buttonText:m,uploadPlaceholder:g,uploadButtonText:y,uploadCompletedText:v,tooLargeMessageText:w,uploadNewphotoText:E,clickToEnlargeText:S,loading:n,hasError:r,errorMessage:o,isImageUploadSuccessful:t,onImageUploadStarted:this.onImageUploadStarted,onImageUploadSuccessfully:this.onImageUploadSuccessfully,onImageUploadFailure:this.onImageUploadFailure,onImageUploadCancel:this.onImageUploadCancel,onSubmit:this.onSubmit,imageBase64:a,onUploadNewPhoto:this.resetPhoto})},t}(b.Component),tY=(0,v.ZP)(tq),tK=function(){return(tK=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},tJ=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},tX=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},tQ=(0,v.ZP)((m=function(e){var t=e.viewType,n=void 0===t?"full":t,r=e.hideClose,o=e.handleTokenExpiry,a=void 0!==o&&o,s=e.userAlertMessage,i=void 0===s?null:s,l=e.userAlertClassName,c=void 0===l?null:l,u=e.clientId,p=void 0===u?"transferwise_web":u,d=e.onRetry,f=e.intent,h=e.onSuccess,m=e.onFailure,v=e.intl,E=e.oneTimeToken,S=e.identityServiceHost,M=(0,b.useState)(null),k=M[0],T=M[1],P=(0,b.useState)(null),A=P[0],I=P[1],W=(0,b.useState)([]),F=W[0],L=W[1],V=(0,b.useState)([]),j=V[0],B=V[1],G=(0,b.useState)(!1),H=G[0],U=G[1],q=(0,b.useState)(null),Y=q[0],K=q[1],J=(0,b.useState)(!1),X=J[0],Q=J[1],$=(0,b.useState)(!0),ee=$[0],et=$[1],en=(0,b.useState)(null),er=en[0],eo=en[1],ea=(0,y.useProfiler)(),es=ea.pcx,ei=ea.newTransaction;(0,b.useEffect)(function(){tJ(void 0,void 0,void 0,function(){return tX(this,function(e){switch(e.label){case 0:return(0,w.zE)("SCA_web_view_challenges",{primaryChallenge:null,error:!1,intent:f}),[4,ed()];case 1:return e.sent(),[2]}})})},[]);var el=function(e){U(!0),K(e||null)},ec=function(e,t){void 0===t&&(t=!1),A.type===e&&Q(!0);var n=F.concat(k).filter(function(t){return t.type!==e}),r=j.find(function(t){return t.type===e})||A,o=(0,D.U)(r,t);I(r),eo(o),B(n)},eu=function(){Q(!1),U(!1)},ep=function(){h(k&&k.type||null)},ed=function(){return tJ(void 0,void 0,void 0,function(){var e,t,r,o,s,i,l,c,u,d,h,g,y;return tX(this,function(b){switch(b.label){case 0:e="".concat(S).concat(_.tokenStatusPath,"?viewType=").concat(n),t=(0,C.Z)({language:v.locale,oneTimeToken:E,clientId:p,ggow:null==es?void 0:es.ggow,mosc:null==es?void 0:es.mosc}),b.label=1;case 1:return b.trys.push([1,7,,8]),[4,fetch(e,tK(tK({},t),{credentials:"omit"}))];case 2:if(!((r=b.sent())&&r.status>=200&&r.status<300))return[3,4];return[4,r.json()];case 3:if(s=td(o=b.sent()),i=tf(o),(0,w.zE)("SCA_Web_got_challenges",{primaryChallenge:s&&s.type,intent:f,error:!1}),null===s)return(0,w.zE)("SCA_Web_challenges_complete",{intent:f,error:!1}),ep(),[2];try{ei()}catch(e){null===(h=null==window?void 0:window.Rollbar)||void 0===h||h.info("New transaction failed")}return l=(0,D.U)(s,!1),T(s),I(s),eo(l),L(i),B(i),U(!1),et(!1),[3,6];case 4:return[4,r.json()];case 5:c=b.sent(),u=(0,z.Z)(c),(0,w.zE)("SCA_Web_no_challenges",{primaryChallenge:"null",error:!0,intent:f,generalError:!1,errorStatus:r.status,errorCode:u.code}),"ott_not_found"!==u.code&&(null===(g=null==window?void 0:window.Rollbar)||void 0===g||g.error("Factored Authentication failed to get challenges",tK({},c))),a?m(u):(U(!0),et(!1),K(u.message)),b.label=6;case 6:return[3,8];case 7:return d=b.sent(),(0,w.zE)("SCA_Web_no_challenges",{primaryChallenge:"null",error:!0,intent:f,generalError:!0}),null===(y=null==window?void 0:window.Rollbar)||void 0===y||y.error("Factored Authentication failed to get challenges",tK({},d)),m(),[3,8];case 8:return[2]}})})};return ee?b.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},b.createElement(g.Loader,null)):H?b.createElement(O,{errorMessage:Y,onRetry:(void 0===d?null:d)||eu,onClose:m,hideClose:void 0!==r&&r}):X?b.createElement(Z,{onReset:eu}):A?b.createElement("div",{className:"text-xs-center"},function(){if(A.type===R.PUSH||A.type===R.TOTP||A.type===R.PROFILER||A.type===R.EMAIL_CHECKPOINT)return b.createElement(eI,{onFailure:el,identityServiceHost:S,oneTimeToken:E,currentChallenge:A,alternateChallenges:j,onShowChallenge:ec,onComplete:ed,intent:f,clientId:p});if(A.type===R.SMS)return b.createElement(eX,{onFailure:el,onSuccess:ep,identityServiceHost:S,oneTimeToken:E,currentChallenge:A,alternateChallenges:j,onShowChallenge:ec,getChallenges:ed,intent:f,clientId:p,phoneNumberId:er});if(A.type===R.WHATSAPP)return b.createElement(tp,{onFailure:el,onSuccess:ep,identityServiceHost:S,oneTimeToken:E,currentChallenge:A,alternateChallenges:j,onShowChallenge:ec,getChallenges:ed,intent:f,clientId:p,phoneNumberId:er});if(A.type===R.VOICE)return b.createElement(te,{onFailure:el,onSuccess:ep,identityServiceHost:S,oneTimeToken:E,currentChallenge:A,alternateChallenges:j,onShowChallenge:ec,getChallenges:ed,intent:f,clientId:p,phoneNumberId:er});if(A.type===R.PASSWORD)return b.createElement(tO,{onFailure:el,onSuccess:ep,identityServiceHost:S,oneTimeToken:E,currentChallenge:A,alternateChallenges:j,onShowChallenge:ec,getChallenges:ed,intent:f,userAlertMessage:i,userAlertClassName:c,clientId:p});if(A.type===R.PHONE_GUESS)return b.createElement(tL,{identityServiceHost:S,oneTimeToken:E,currentChallenge:A,alternateChallenges:j,intent:f,getChallenges:ed,clientId:p});if(A.type===R.SELFIE_WITH_ID)return b.createElement(tY,{oneTimeToken:E,intent:f,onFailure:m,onSuccess:ep,currentChallenge:A,clientId:p});if(A.type===R.EMAIL_VERIFICATION)return b.createElement(N,{identityServiceHost:S,oneTimeToken:E,intent:f,challenge:A,clientId:p,onSuccess:function(){et(!0),ed()}});if(A.type===R.MANDATORY_RESET_PASSWORD)return b.createElement(x,{title:A.viewData.attributes.header,subtitle:A.viewData.attributes.message});if(A.type===R.RECAPTCHA){var e=A.siteKey;return b.createElement(eF,{onFailure:m,onSuccess:ep,identityServiceHost:S,oneTimeToken:E,siteKey:e,clientId:p,getChallenges:ed})}return null}()):null},function(e){var t=e.onFailure;return b.createElement(L,{onFailure:t},b.createElement(m,F({},e)))}))},36617:function(e,t,n){"use strict";var r=n(67294),o=n(85901),a=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};t.Z=function(e){var t=e.request,n=e.onSuccess,s=e.onError,i=e.onLimitReached,l=e.shouldRetry,c=void 0===l?function(e){return 202===e.status}:l,u=e.maxRequests,p=e.delay,d=void 0===p?1e3:p,f=(0,r.useState)(0),h=f[0],m=f[1],g=void 0===u?10:u,y=(0,o.Z)(function(){var e,n,r,o;return e=void 0,n=void 0,r=void 0,o=function(){var e;return a(this,function(n){switch(n.label){case 0:if(m(h+1),!(h<g))return[3,2];return[4,t()];case 1:return[2,{status:(e=n.sent()).status,data:e.data}];case 2:i&&i(),n.label=3;case 3:return[2]}})},new(r||(r=Promise))(function(t,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?t(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(s,i)}l((o=o.apply(e,n||[])).next())})},[]),b=y.error,v=y.loading,w=y.retry,E=y.value;return(0,r.useEffect)(function(){var e;return!v&&E&&c(E)&&(e=setTimeout(function(){w()},d)),v||!E||c(E)||n(null==E?void 0:E.data),!v&&b&&s&&s(b),function(){return clearTimeout(e)}},[b,v,E]),{requestCount:h,retry:w}}},50554:function(e,t,n){"use strict";var r=n(58915),o=n(22563),a=n(67294),s=n(86896);n(59956);var i=function(){window.location.assign("/help/contact/flows/logged-out/trouble-logging-in")};t.Z=function(e){var t=e.errorMessage,n=e.retry,l=e.description,c=e.showGetHelp,u=void 0===c||c,p=e.children,d=(0,s.Z)();return a.createElement("div",{role:"alert",className:"text-xs-center d-flex flex-column justify-content-center error-container"},a.createElement("div",{className:"error-content"},a.createElement(o.a,{size:o.S.SMALL,className:"m-b-3",name:o.A.EXCLAMATION_MARK,alt:""}),a.createElement("h1",{className:"m-b-2"},t||d.formatMessage({id:"security.web.components.error.message",defaultMessage:"Something went wrong, please try again."})),l&&a.createElement("p",{className:"m-t-4 m-b-2"},l)),a.createElement("div",{className:"p-t-5 m-t-auto"},null!=n&&a.createElement(r.Button,{className:"m-b-1",block:!0,onClick:n},d.formatMessage({id:"security.web.components.retry",defaultMessage:"Retry"})),u&&a.createElement(r.Button,{className:"m-b-1",block:!0,priority:r.Priority.TERTIARY,onClick:i},d.formatMessage({id:"security.web.components.get-help",defaultMessage:"Get help"})),p))}},65545:function(){},59956:function(){},67544:function(){},27382:function(){},66268:function(){},80908:function(){},83209:function(){},2001:function(){},61041:function(){},98158:function(){},66527:function(){},86297:function(){},2551:function(){},11163:function(e,t,n){e.exports=n(21996)},85901:function(e,t,n){"use strict";var r=n(97582),o=n(67294),a=n(21095);t.Z=function(e,t){void 0===t&&(t=[]);var n=(0,o.useState)(0),s=n[0],i=n[1],l=(0,a.Z)(e,(0,r.__spreadArrays)(t,[s])),c=l.loading,u=(0,o.useCallback)(function(){c||i(function(e){return e+1})},(0,r.__spreadArrays)(t,[c]));return(0,r.__assign)((0,r.__assign)({},l),{retry:u})}}}]);
//# sourceMappingURL=9553-e63221554635e391.js.map